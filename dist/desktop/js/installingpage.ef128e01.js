(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["installingpage"],{"2aba":function(e,t,a){},"33b7":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"flex flex-1 flex-col h-full overflow-hidden"},[e.loading||null===e.currentModpack?e._e():a("div",{key:"main-window",staticClass:"flex flex-col h-full",style:{"background-image":"url("+(e.currentModpack.art.filter((function(e){return"splash"===e.type})).length>0?e.currentModpack.art.filter((function(e){return"splash"===e.type}))[0].url:"https://dist.creeper.host/FTB2/wallpapers/alt/T_nw.png")+")"}},[a("div",[a("div",{staticClass:"header-image",staticStyle:{height:"120px"}},[a("span",{staticClass:"instance-name text-4xl"},[e._v(e._s(e.currentModpack.name))]),a("span",{staticClass:"instance-info"},[a("small",[a("em",[e._v(e._s(e.currentModpack.synopsis))])]),e.currentModpack.tags?a("div",{staticClass:"flex flex-row items-center"},[a("div",{staticClass:"flex flex-row"},[e._l(e.limitedTags,(function(t,s){return a("span",{key:"tag-"+s,staticClass:"cursor-pointer rounded mr-2 text-sm bg-gray-600 px-2 lowercase font-light",staticStyle:{"font-variant":"small-caps"},on:{click:function(a){return e.clickTag(t.name)}}},[e._v(e._s(t.name))])})),e.currentModpack.tags.length>5?a("span",{key:"tag-more",staticClass:"rounded mr-2 text-sm bg-gray-600 px-2 lowercase font-light",staticStyle:{"font-variant":"small-caps"}},[e._v("+"+e._s(e.currentModpack.tags.length-5))]):e._e()],2)]):e._e()]),e.currentModpack&&e.currentModpack.notification?a("div",{staticClass:"update-bar"},[e._v(" "+e._s(e.currentModpack.notification)+" ")]):e._e()])]),a("div",{staticClass:"flex flex-col frosted-glass",staticStyle:{height:"auto",flex:"1","overflow-y":"auto"}},[a("div",{staticClass:"tab-content flex-1 py-4 mx-1",staticStyle:{"overflow-y":"auto"}},[a("div",{staticClass:"tab-pane flex flex-row h-full"},[a("div",{ref:"modList",staticClass:"mod-list bg-navbar w-1/3 overflow-y-auto relative",attrs:{id:"modList"}},[a("ul",{staticClass:"p-4"},[e._l(Object.keys(e.steps).slice(0,4),(function(t){return a("li",{key:t,class:e.steps[t].done?"downloaded text-gray-400":"text-white"},[a("p",{staticClass:"text-sm"},[e.steps[t].done?a("font-awesome-icon",{staticClass:"text-green-600",attrs:{icon:"check"}}):e._e(),e._v(" "+e._s(e.steps[t].name)+" ")],1)])})),e._l(e.files,(function(t){return a("li",{key:t.id,staticClass:"flex flex-row",class:"downloaded"===e.getFileStatus(t.id)||e.steps["DOWNLOADS"].done?"downloaded text-gray-400":"text-white"},[a("p",{staticClass:"text-sm"},["waiting"!==e.getFileStatus(t.id)||e.steps["DOWNLOADS"].done?a("font-awesome-icon",{staticClass:"text-green-600",attrs:{spin:"preparing"===e.getFileStatus(t.id),icon:"preparing"===e.getFileStatus(t.id)?"sync-alt":"check"}}):e._e(),e._v(" "+e._s(t.name)+" ")],1)])})),e._l(Object.keys(e.steps).slice(4,7),(function(t){return a("li",{key:t,class:e.steps[t].done?"downloaded text-gray-400":"text-white"},[a("p",{staticClass:"text-sm"},[e.steps[t].done?a("font-awesome-icon",{staticClass:"text-green-600",attrs:{icon:"check"}}):e._e(),e._v(" "+e._s(e.steps[t].name)+" ")],1)])})),e.steps["FINISHED"].done?a("div",{ref:"viewInstanceButton",staticClass:"flex flex-col align-center mx-auto text-center",attrs:{id:"viewInstanceButton"}},[a("p",[e._v("Modpack installed!")]),a("ftb-button",{staticClass:"py-2 px-4 mx-2 text-center float-right",attrs:{color:"primary","css-class":"text-center text-l"},on:{click:function(t){return e.goToInstance()}}},[e._v("View Instance")])],1):e._e()],2)]),a("div",{staticClass:"flex-1 h-full flex flex-col"},[e.advertsEnabled?a("div",{staticClass:"flex flex-col w-full mt-auto mb-auto"},[e.showPlaceholder?e._e():a("div",{ref:"adRef",attrs:{id:"ow-ad"}}),e.showPlaceholder?a("video",{staticStyle:{margin:"0 auto"},attrs:{width:"400",height:"300",autoplay:"",muted:"",loop:""},domProps:{muted:!0}},[a("source",{attrs:{src:"https://dist.modpacks.ch/windows_desktop_src_assets_CH_AD.mp4",type:"video/mp4"}})]):e._e(),a("span",{staticClass:"ml-auto mr-auto text-xs cursor-pointer",staticStyle:{"padding-left":"315px"},on:{click:e.reportAdvert}},[e._v("Report advert")])]):e._e()])])])])])])},n=[],o=(a("99af"),a("4de4"),a("7db0"),a("a630"),a("c975"),a("fb6a"),a("b64b"),a("d3b7"),a("ac1f"),a("3ca3"),a("5319"),a("96cf"),a("1da1")),i=a("d4ec"),r=a("bee2"),l=a("262e"),c=a("2caf"),d=a("9ab4"),u=a("60a3"),p=a("4bb5"),f=a("c7bf"),v=a("c396"),g=a("ffa8"),h=a("4f59"),b=a("d70b"),m=a("adff"),y=a("81d4"),k=a("7dda"),w=a("672c"),I=a("aeef"),x=function(e){Object(l["a"])(a,e);var t=Object(c["a"])(a);function a(){var e;return Object(i["a"])(this,a),e=t.apply(this,arguments),e.activeTab="overview",e.showMsgBox=!1,e.showInstallBox=!1,e.installSelectedVersion=null,e.msgBox={title:"",content:"",type:"",okAction:Function,cancelAction:Function},e.loading=!0,e.files=[],e.downloadedFiles={},e.steps={INIT:{name:"Initialise",done:!1},VANILLA:{name:"Install Vanilla launcher",done:!1},API:{name:"Gather data from API",done:!1},FORGE:{name:"Get Forge information",done:!1},DOWNLOADS:{name:"Download files",done:!1},POSTINSTALL:{name:"Post-install tasks",done:!1},FINISHED:{name:"Finished",done:!1}},e.activeChangelog=-1,e.changelogs=[],e.showPlaceholder=!1,e.installedUUID=null,e}return Object(r["a"])(a,[{key:"goBack",value:function(){this.$router.go(-1)}},{key:"goToInstance",value:function(){null!==this.installedUUID&&this.$router.replace({name:"instancepage",query:{uuid:this.installedUUID}})}},{key:"clickTag",value:function(e){}},{key:"mounted",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,a,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=parseInt(this.$route.query.modpackid,10),e.next=3,this.fetchModpack(t);case 3:void 0!==this.modpacks.packsCache[t]&&(this.loading=!1),null===this.modpacks.installing&&(this.updateInstall({modpackID:t,progress:0}),a=!1,this.modpacks.privatePacks.length>0&&void 0!==this.modpacks.privatePacks.find((function(e){return e.id===t}))&&(a=!0),this.sendMessage({payload:{type:void 0===this.$route.query.uuid?"installInstance":"updateInstance",uuid:this.$route.query.uuid,id:t,version:this.$route.query.versionID,_private:a},callback:function(e){if("files"===e.status)s.files=JSON.parse(e.message);else if("success"===e.status){s.installedUUID=e.uuid,s.finishInstall({modpackID:t,messageID:e.requestId});var a=s.steps["FINISHED"];a.done=!0,u["c"].set(s.steps,"FINISHED",a),setTimeout((function(){var e=s.$refs.viewInstanceButton;(null!==e&&void 0!==e||(e=document.getElementById("viewInstanceButton"),null!==e&&void 0!==e))&&e.scrollIntoView({behavior:"smooth"})}),500),s.sendMessage({payload:{type:"installedInstances",refresh:!0},callback:function(e){s.storePacks(e)}})}else"error"===e.status?s.updateInstall({modpackID:t,messageID:e.requestId,error:!0,errorMessage:e.message,instanceID:e.uuid}):"POSTINSTALL"===e.currentStage?s.updateInstall({modpackID:t,messageID:e.requestId,stage:e.currentStage}):"init"===e.status?s.updateInstall({modpackID:t,messageID:e.requestId,stage:"INIT",message:e.message}):e.overallPercentage<=100&&s.updateInstall({modpackID:t,messageID:e.requestId,progress:e.overallPercentage,downloadSpeed:e.speed,downloadedBytes:e.currentBytes,totalBytes:e.overallBytes,stage:e.currentStage});if(e.currentStage){var n=s.steps[e.currentStage];if(void 0!==n)for(var o=Object.keys(s.steps).indexOf(e.currentStage),i=0;i<o;i++){var r=s.steps[Object.keys(s.steps)[i]];r.done||u["c"].set(r,"done",!0)}}}})),setTimeout((function(){console.log("Loading advert"),OwAd?(window.ad?(console.log("Is window advert"),s.ad=window.ad,s.ad.refreshAd()):(console.log("Created advert"),s.ad=new OwAd(document.getElementById("ow-ad")),window.ad=s.ad),s.ad.addEventListener("error",(function(){s.showPlaceholder=!0})),s.ad.addEventListener("impression",(function(){fetch("".concat(b["a"].apiURL,"/public/modpack/").concat(s.$route.query.modpackid,"/").concat(s.$route.query.versionID,"/ad/install/video"))})),s.ad.addEventListener("display_ad_loaded",(function(){fetch("".concat(b["a"].apiURL,"/public/modpack/").concat(s.$route.query.modpackid,"/").concat(s.$route.query.versionID,"/ad/install/static"))}))):(s.showPlaceholder=!0,console.log("No advert loaded"))}),500),setInterval((function(){if(null!==s.modpacks.installing&&s.files.length>0&&!s.steps["FINISHED"].done){var e=s.$refs.modList;if(void 0!==e){var t=e.lastChild,a=Array.from(t.children).filter((function(e){return e.classList.contains("downloaded")})).reverse()[0];null!==a&&a.scrollIntoView({behavior:"smooth"})}}}),500);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"reportAdvert",value:function(){if(void 0!==this.ad&&null!==this.ad){var e=document.getElementById("ow-ad").innerHTML;this.ad.removeAd(),this.ad=null,window.ad=null,this.showPlaceholder=!0,this.reportAd({object:"",html:e})}}},{key:"limitedTags",get:function(){return this.currentModpack&&this.currentModpack.tags?this.currentModpack.tags.slice(0,5):[]}},{key:"currentModpack",get:function(){var e=parseInt(this.$route.query.modpackid,10);return void 0===this.modpacks.packsCache[e]?null:this.modpacks.packsCache[e]}},{key:"advertsEnabled",get:function(){var e,t;return!0===this.settings.settings.showAdverts||"true"===this.settings.settings.showAdverts||null===(null===(e=this.auth)||void 0===e||null===(t=e.token)||void 0===t?void 0:t.activePlan)}},{key:"currentVersionObject",get:function(){var e=this;if(null!==this.currentModpack){var t,a=null===(t=this.currentModpack)||void 0===t?void 0:t.versions.find((function(t){return t.id===e.latestRelease}));if(void 0!==a)return a}return null}},{key:"shuffledServers",get:function(){return null!==this.currentVersionObject&&void 0!==this.currentVersionObject.mtgID?Object(k["e"])(this.serverListState.servers[this.currentVersionObject.mtgID]):[]}},{key:"latestRelease",get:function(){if(void 0!==this.currentModpack){var e,t=null===(e=this.currentModpack)||void 0===e?void 0:e.versions.find((function(e){return"release"===e.type.toLowerCase()}));return void 0!==t?t.id:null}return null}}]),a}(u["c"]);Object(d["a"])([Object(p["c"])("modpacks")],x.prototype,"modpacks",void 0),Object(d["a"])([Object(p["c"])("settings")],x.prototype,"settings",void 0),Object(d["a"])([Object(p["c"])("websocket")],x.prototype,"socket",void 0),Object(d["a"])([Object(p["c"])("auth")],x.prototype,"auth",void 0),Object(d["a"])([Object(p["a"])("fetchModpack",{namespace:"modpacks"})],x.prototype,"fetchModpack",void 0),Object(d["a"])([Object(p["a"])("storeInstalledPacks",{namespace:"modpacks"})],x.prototype,"storePacks",void 0),Object(d["a"])([Object(p["a"])("updateInstall",{namespace:"modpacks"})],x.prototype,"updateInstall",void 0),Object(d["a"])([Object(p["a"])("finishInstall",{namespace:"modpacks"})],x.prototype,"finishInstall",void 0),Object(d["a"])([Object(p["a"])("sendMessage")],x.prototype,"sendMessage",void 0),Object(d["a"])([Object(p["a"])("reportAdvert")],x.prototype,"reportAd",void 0),Object(d["a"])([Object(p["a"])("getChangelog",{namespace:"modpacks"})],x.prototype,"getChangelog",void 0),Object(d["a"])([Object(p["c"])("servers")],x.prototype,"serverListState",void 0),Object(d["a"])([Object(p["a"])("fetchServers",{namespace:"servers"})],x.prototype,"fetchServers",void 0),Object(d["a"])([Object(p["b"])("getFileStatus")],x.prototype,"getFileStatus",void 0),x=Object(d["a"])([Object(u["a"])({name:"InstallingPage",components:{"ftb-input":f["a"],"ftb-toggle":v["a"],"ftb-slider":h["a"],"ftb-button":g["a"],InstallModal:I["a"],FTBModal:y["a"],"message-modal":m["a"],ServerCard:w["a"]}})],x);var O=x,j=O,C=(a("97b1"),a("2877")),_=Object(C["a"])(j,s,n,!1,null,null,null);t["default"]=_.exports},"4df4":function(e,t,a){"use strict";var s=a("0366"),n=a("7b0b"),o=a("9bdd"),i=a("e95a"),r=a("50c4"),l=a("8418"),c=a("35a1");e.exports=function(e){var t,a,d,u,p,f,v=n(e),g="function"==typeof this?this:Array,h=arguments.length,b=h>1?arguments[1]:void 0,m=void 0!==b,y=c(v),k=0;if(m&&(b=s(b,h>2?arguments[2]:void 0,2)),void 0==y||g==Array&&i(y))for(t=r(v.length),a=new g(t);t>k;k++)f=m?b(v[k],k):v[k],l(a,k,f);else for(u=y.call(v),p=u.next,a=new g;!(d=p.call(u)).done;k++)f=m?o(u,b,[d.value,k],!0):d.value,l(a,k,f);return a.length=k,a}},7562:function(e,t,a){},"97b1":function(e,t,a){"use strict";var s=a("7562"),n=a.n(s);n.a},a630:function(e,t,a){var s=a("23e7"),n=a("4df4"),o=a("1c7e"),i=!o((function(e){Array.from(e)}));s({target:"Array",stat:!0,forced:i},{from:n})},c396:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:"flex flex-"+(e.inline?"row":"col")+" "+(e.inline?"items-center":"")+" my-2"},[e.inline?[a("span",{staticClass:"toggle border border-input flex items-center rounded",class:e.toggleClasses,staticStyle:{width:"56px"},on:{click:e.toggle}},[a("span",{staticClass:"w-6 h-6 shadow-inner bg-input rounded-sm bg-gray-400",class:e.disabled?"cursor-not-allowed":" cursor-pointer "})]),a("label",{staticClass:"block uppercase tracking-wide text-xs font-bold mx-2",class:e.disabled?"text-gray-600":""},[e._v(" "+e._s(e.label)+" ")])]:[a("div",{staticClass:"w-full px-1"},[a("label",{staticClass:"block uppercase tracking-wide text-xs font-bold mb-2",class:e.disabled?"text-gray-600":""},[e._v(" "+e._s(e.label)+" ")]),a("span",{staticClass:"toggle border border-input flex items-center rounded",class:e.toggleClasses,staticStyle:{width:"56px"},on:{click:e.toggle}},[a("span",{staticClass:"w-6 h-6 shadow-inner bg-input cursor-pointer rounded-sm bg-gray-400",class:e.disabled?"cursor-not-allowed":" cursor-pointer "})])])]],2)},n=[],o=a("d4ec"),i=a("bee2"),r=a("262e"),l=a("2caf"),c=a("9ab4"),d=a("60a3"),u=function(e){Object(r["a"])(a,e);var t=Object(l["a"])(a);function a(){return Object(o["a"])(this,a),t.apply(this,arguments)}return Object(i["a"])(a,[{key:"toggle",value:function(){this.disabled||this.handleChange(!this.value)}},{key:"handleChange",value:function(e){this.$emit("change",e)}},{key:"toggleClasses",get:function(){var e=this.currentColor;return[e,this.value?"justify-end":"justify-start",this.disabled?"cursor-not-allowed":"cursor-pointer"]}},{key:"currentColor",get:function(){return this.value?this.onColor:this.offColor}}]),a}(d["c"]);Object(c["a"])([Object(d["b"])({default:""})],u.prototype,"label",void 0),Object(c["a"])([Object(d["b"])({default:"bg-primary"})],u.prototype,"onColor",void 0),Object(c["a"])([Object(d["b"])({default:""})],u.prototype,"offColor",void 0),Object(c["a"])([Object(d["b"])({default:!1})],u.prototype,"value",void 0),Object(c["a"])([Object(d["b"])({default:!1})],u.prototype,"inline",void 0),Object(c["a"])([Object(d["b"])({default:!1})],u.prototype,"disabled",void 0),u=Object(c["a"])([Object(d["a"])({props:["label","onColor","offColor","value","inline","disabled"]})],u);var p=u,f=p,v=(a("e210"),a("2877")),g=Object(v["a"])(f,s,n,!1,null,null,null);t["a"]=g.exports},e210:function(e,t,a){"use strict";var s=a("2aba"),n=a.n(s);n.a}}]);
//# sourceMappingURL=installingpage.ef128e01.js.map