{"version":3,"sources":["webpack:///./src/components/chat/FriendChat.vue?2672","webpack:///./node_modules/core-js/modules/es.number.constructor.js","webpack:///./src/views/ChatWindow.vue?d1ac","webpack:///./src/views/ChatWindow.vue?6ede","webpack:///./src/components/chat/FriendsList.vue?9f98","webpack:///./src/components/chat/FriendsList.vue?431d","webpack:///./src/components/chat/FriendsList.vue?3a9a","webpack:///./src/components/chat/FriendsList.vue?87b0","webpack:///./src/components/chat/AddFriend.vue?8881","webpack:///./src/components/chat/AddFriend.vue?1ce9","webpack:///./src/components/chat/AddFriend.vue?68cc","webpack:///./src/components/chat/AddFriend.vue","webpack:///./src/components/chat/FriendChat.vue?1f3a","webpack:///./src/components/modals/ConfirmationModal.vue?08ad","webpack:///./src/components/modals/ConfirmationModal.vue?05f5","webpack:///./src/components/modals/ConfirmationModal.vue?44f1","webpack:///./src/components/modals/ConfirmationModal.vue","webpack:///./src/components/chat/FriendChat.vue?aa81","webpack:///./src/components/chat/FriendChat.vue?2c84","webpack:///./src/components/chat/FriendChat.vue?dea5","webpack:///./src/views/ChatWindow.vue?4678","webpack:///./src/views/ChatWindow.vue?e4b7","webpack:///./src/views/ChatWindow.vue","webpack:///./src/components/chat/FriendsList.vue?af9d"],"names":["DESCRIPTORS","global","isForced","redefine","has","classof","inheritIfRequired","toPrimitive","fails","create","getOwnPropertyNames","f","getOwnPropertyDescriptor","defineProperty","trim","NUMBER","NativeNumber","NumberPrototype","prototype","BROKEN_CLASSOF","toNumber","argument","first","third","radix","maxCode","digits","length","index","code","it","charCodeAt","NaN","slice","parseInt","key","NumberWrapper","value","arguments","dummy","this","valueOf","call","keys","split","j","constructor","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","websocket","socket","isConnected","showPage","hidePage","currentPage","messages","friends","friend","profile","chat","hash","medium","undefined","getFriends","loadingFriends","_e","removeFriend","blockFriend","sendMessage","auth","staticStyle","_v","on","openProfile","staticRenderFns","avatarName","token","_s","mc","display","copyFriendCode","friendCode","directives","name","rawName","expression","domProps","$event","target","composing","search","toggleSearch","openAddFriendUI","_l","id","class","activeFriend","shortHash","openFriendChat","online","unreadMessages","currentPack","openModpack","currentFriends","loading","toggleRequests","friendRequests","showRequests","acceptingFriends","indexOf","acceptFriendRequest","copied","showSearch","newVal","oldVal","JSON","stringify","getFriendCode","$forceUpdate","push","getFriendCodeFromHash","self","payload","type","userHash","callback","fetch","headers","method","body","then","response","json","data","catch","err","overwolf","utils","openUrlInDefaultBrowser","currentPackID","placeOnClipboard","setTimeout","provider","accounts","find","s","identityProvider","userId","unread","Object","forEach","filter","m","read","a","accepted","sort","b","Number","requests","namespace","deep","props","component","message","messageType","model","$$v","submit","submitFriendRequest","status","components","FTBInput","FTBButton","openServer","ref","onScroll","author","linkify","content","onMessageClick","_f","date","_k","keyCode","send","newMessage","checkLink","hideModal","navigateToLink","title","noAction","yesAction","whitelistedDomains","lastScroll","hasScrolled","text","urlRegex","replace","url","$refs","el","lastChild","scrollIntoView","behavior","event","tagName","href","domain","match","whitelistedDomain","d","preventDefault","pos","scrollTop","maximum","scrollHeight","clientHeight","scrollToLastChild","currentServer","ConfirmationModal","FTBModal","hasLoaded","console","log","long","setInterval","longHash","Array","isArray","sendIRCMessage","set","map","request","existing","windows","getCurrentWindow","result","window","changeSize","height","page","expand","retract","removeFriendAction","success","nick","Date","getTime","short","registerIRCCallback","jsEvent","ircType","from","settings","blockedUsers","r","p","TitleBar","FriendsList","AddFriend","FriendChat"],"mappings":"wJAAA,yBAAme,EAAG,G,kCCCte,IAAIA,EAAc,EAAQ,QACtBC,EAAS,EAAQ,QACjBC,EAAW,EAAQ,QACnBC,EAAW,EAAQ,QACnBC,EAAM,EAAQ,QACdC,EAAU,EAAQ,QAClBC,EAAoB,EAAQ,QAC5BC,EAAc,EAAQ,QACtBC,EAAQ,EAAQ,QAChBC,EAAS,EAAQ,QACjBC,EAAsB,EAAQ,QAA8CC,EAC5EC,EAA2B,EAAQ,QAAmDD,EACtFE,EAAiB,EAAQ,QAAuCF,EAChEG,EAAO,EAAQ,QAA4BA,KAE3CC,EAAS,SACTC,EAAef,EAAOc,GACtBE,EAAkBD,EAAaE,UAG/BC,EAAiBd,EAAQI,EAAOQ,KAAqBF,EAIrDK,EAAW,SAAUC,GACvB,IACIC,EAAOC,EAAOC,EAAOC,EAASC,EAAQC,EAAQC,EAAOC,EADrDC,EAAKvB,EAAYc,GAAU,GAE/B,GAAiB,iBAANS,GAAkBA,EAAGH,OAAS,EAGvC,GAFAG,EAAKhB,EAAKgB,GACVR,EAAQQ,EAAGC,WAAW,GACR,KAAVT,GAA0B,KAAVA,GAElB,GADAC,EAAQO,EAAGC,WAAW,GACR,KAAVR,GAA0B,MAAVA,EAAe,OAAOS,SACrC,GAAc,KAAVV,EAAc,CACvB,OAAQQ,EAAGC,WAAW,IACpB,KAAK,GAAI,KAAK,GAAIP,EAAQ,EAAGC,EAAU,GAAI,MAC3C,KAAK,GAAI,KAAK,IAAKD,EAAQ,EAAGC,EAAU,GAAI,MAC5C,QAAS,OAAQK,EAInB,IAFAJ,EAASI,EAAGG,MAAM,GAClBN,EAASD,EAAOC,OACXC,EAAQ,EAAGA,EAAQD,EAAQC,IAI9B,GAHAC,EAAOH,EAAOK,WAAWH,GAGrBC,EAAO,IAAMA,EAAOJ,EAAS,OAAOO,IACxC,OAAOE,SAASR,EAAQF,GAE5B,OAAQM,GAKZ,GAAI5B,EAASa,GAASC,EAAa,UAAYA,EAAa,QAAUA,EAAa,SAAU,CAS3F,IARA,IAcqBmB,EAdjBC,EAAgB,SAAgBC,GAClC,IAAIP,EAAKQ,UAAUX,OAAS,EAAI,EAAIU,EAChCE,EAAQC,KACZ,OAAOD,aAAiBH,IAElBjB,EAAiBX,GAAM,WAAcS,EAAgBwB,QAAQC,KAAKH,MAAalC,EAAQkC,IAAUxB,GACjGT,EAAkB,IAAIU,EAAaI,EAASU,IAAMS,EAAOH,GAAiBhB,EAASU,IAElFa,EAAO3C,EAAcU,EAAoBM,GAAgB,6KAMhE4B,MAAM,KAAMC,EAAI,EAAQF,EAAKhB,OAASkB,EAAGA,IACrCzC,EAAIY,EAAcmB,EAAMQ,EAAKE,MAAQzC,EAAIgC,EAAeD,IAC1DtB,EAAeuB,EAAeD,EAAKvB,EAAyBI,EAAcmB,IAG9EC,EAAclB,UAAYD,EAC1BA,EAAgB6B,YAAcV,EAC9BjC,EAASF,EAAQc,EAAQqB,K,yDC5E3B,yBAA+gB,EAAG,G,yCCAlhB,IAAIW,EAAS,WAAa,IAAIC,EAAIR,KAASS,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,aAAaC,MAAM,CAAC,GAAK,QAAQ,CAACH,EAAG,aAAeH,EAAIO,UAAUC,OAAOC,YAAqMT,EAAqB,kBAAEG,EAAG,MAAM,CAACE,YAAY,wBAAwB,CAACF,EAAG,eAAe,CAACG,MAAM,CAAC,SAAWN,EAAIU,SAAS,SAAWV,EAAIW,SAAS,YAAcX,EAAIY,YAAY,SAAWZ,EAAIa,SAAS,QAAUb,EAAIc,QAAQ,aAA8B,OAAfd,EAAIe,OAAkBf,EAAIe,OAAOC,QAAQC,KAAKC,KAAKC,YAASC,EAAU,WAAapB,EAAIqB,WAAW,QAAUrB,EAAIsB,kBAAkBnB,EAAG,MAAM,CAACE,YAAY,oBAAoB,CAAsB,cAApBL,EAAIY,YAA6BT,EAAG,aAAaH,EAAIuB,KAA0B,eAApBvB,EAAIY,aAA+C,OAAfZ,EAAIe,OAAiBZ,EAAG,aAAa,CAAChB,IAAIa,EAAIe,OAAOC,QAAQC,KAAKC,KAAKC,OAAOb,MAAM,CAAC,OAASN,EAAIe,OAAO,aAAef,EAAIwB,aAAa,YAAcxB,EAAIyB,YAAY,UAAYzB,EAAIe,OAAOC,QAAQC,KAAKC,KAAKC,OAAO,SAAWnB,EAAIa,SAASb,EAAIe,OAAOC,QAAQC,KAAKC,KAAKC,QAAQ,YAAcnB,EAAI0B,eAAe1B,EAAIuB,MAAM,IAAI,GAAIvB,EAAI2B,KAAc,UAAExB,EAAG,MAAM,CAACE,YAAY,uCAAuC,CAACF,EAAG,oBAAoB,CAACE,YAAY,UAAUuB,YAAY,CAAC,YAAY,QAAQtB,MAAM,CAAC,KAAO,WAAW,KAAO,OAAO,GAAGH,EAAG,MAAM,CAACE,YAAY,uCAAuC,CAACF,EAAG,oBAAoB,CAACE,YAAY,UAAUuB,YAAY,CAAC,YAAY,QAAQtB,MAAM,CAAC,KAAO,UAAUH,EAAG,KAAK,CAACE,YAAY,eAAe,CAACL,EAAI6B,GAAG,wEAAwE1B,EAAG,aAAa,CAACE,YAAY,yBAAyBC,MAAM,CAAC,MAAQ,WAAWwB,GAAG,CAAC,MAAQ9B,EAAI+B,cAAc,CAAC/B,EAAI6B,GAAG,6BAA6B,GAA9mD1B,EAAG,MAAM,CAACE,YAAY,uCAAuC,CAACF,EAAG,oBAAoB,CAACE,YAAY,UAAUuB,YAAY,CAAC,YAAY,QAAQtB,MAAM,CAAC,KAAO,WAAW,KAAO,OAAO,IAA87C,IAC1zD0B,EAAkB,G,sJCDlB,EAAS,WAAa,IAAIhC,EAAIR,KAASS,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,qCAAqCuB,YAAY,CAAC,MAAQ,UAAU,CAACzB,EAAG,MAAM,CAACE,YAAY,wDAAwDuB,YAAY,CAAC,OAAS,SAAS,CAACzB,EAAG,MAAM,CAACE,YAAY,gCAAgCF,EAAG,MAAM,CAACE,YAAY,kCAAkC,CAACF,EAAG,MAAM,CAACE,YAAY,eAAeuB,YAAY,CAAC,eAAe,UAAUtB,MAAM,CAAC,IAAO,8BAAgCN,EAAIiC,WAAY,MAAQ,UAAU9B,EAAG,MAAM,CAACE,YAAY,iBAAiB,CAAqB,OAAnBL,EAAI2B,KAAKO,MAAgB/B,EAAG,IAAI,CAACE,YAAY,WAAW,CAACL,EAAI6B,GAAG7B,EAAImC,GAAGnC,EAAI2B,KAAKO,MAAME,GAAGC,YAAYrC,EAAIuB,KAAyB,OAAnBvB,EAAI2B,KAAKO,MAAgB/B,EAAG,IAAI,CAAChB,IAAI,aAAakB,YAAY,yBAAyByB,GAAG,CAAC,MAAQ9B,EAAIsC,iBAAiB,CAACtC,EAAI6B,GAAG7B,EAAImC,GAAGnC,EAAI2B,KAAKO,MAAME,GAAGG,YAAY,KAAKpC,EAAG,aAAa,CAACG,MAAM,CAAC,KAAO,SAAS,CAAEN,EAAU,OAAEG,EAAG,OAAO,CAAChB,IAAI,UAAU,CAACa,EAAI6B,GAAG,gBAAgB7B,EAAIuB,QAAQ,GAAGvB,EAAIuB,WAAWpB,EAAG,MAAM,CAACE,YAAY,wCAAwCuB,YAAY,CAAC,aAAa,UAAU,CAACzB,EAAG,MAAM,CAACE,YAAY,2CAA2C,CAACF,EAAG,IAAI,CAACE,YAAY,QAAQ,CAACL,EAAI6B,GAAG,aAAc7B,EAAc,WAAEG,EAAG,QAAQ,CAACqC,WAAW,CAAC,CAACC,KAAK,QAAQC,QAAQ,UAAUrD,MAAOW,EAAU,OAAE2C,WAAW,WAAWtC,YAAY,wBAAwBuB,YAAY,CAAC,QAAU,SAAStB,MAAM,CAAC,KAAO,SAAS,YAAc,aAAasC,SAAS,CAAC,MAAS5C,EAAU,QAAG8B,GAAG,CAAC,MAAQ,SAASe,GAAWA,EAAOC,OAAOC,YAAqB/C,EAAIgD,OAAOH,EAAOC,OAAOzD,WAAUW,EAAIuB,KAAKpB,EAAG,MAAM,CAACE,YAAY,iBAAiB,CAACF,EAAG,oBAAoB,CAACE,YAAY,sBAAsBC,MAAM,CAAC,KAAO,UAAUwB,GAAG,CAAC,MAAQ9B,EAAIiD,gBAAgB9C,EAAG,oBAAoB,CAACE,YAAY,sBAAsBC,MAAM,CAAC,KAAO,aAAawB,GAAG,CAAC,MAAQ9B,EAAIkD,oBAAoB,KAAK/C,EAAG,MAAM,CAACE,YAAY,mBAAmBL,EAAImD,GAAInD,EAAkB,gBAAE,SAASe,GAAQ,OAAOZ,EAAG,MAAM,CAAChB,IAAI4B,EAAOqC,GAAGC,MAAO,mCAAyD,eAApBrD,EAAIY,kBAAqDQ,IAArBpB,EAAIsD,cAA8BtD,EAAIsD,eAAiBvC,EAAOwC,UAAY,wBAA0B,+BAAiC,kBAAmBzB,GAAG,CAAC,MAAQ,SAASe,GAAQ,OAAO7C,EAAIwD,eAAezC,MAAW,CAACZ,EAAG,IAAI,CAACkD,MAAO,wCAA0CtC,EAAO0C,OAAS,uBAAyB,0BAA2B7B,YAAY,CAAC,gBAAgB,aAAa,CAAC5B,EAAI6B,GAAG7B,EAAImC,GAAGpB,EAAOC,QAAQqB,SAAS,OAAQrC,EAAI0D,eAAe3C,EAAOC,QAAQC,KAAKC,KAAKC,QAAU,EAAGhB,EAAG,IAAI,CAACE,YAAY,6CAA6C,CAACL,EAAI6B,GAAG7B,EAAImC,GAAGnC,EAAI0D,eAAe3C,EAAOC,QAAQC,KAAKC,KAAKC,YAAYnB,EAAIuB,KAAKpB,EAAG,MAAM,CAACE,YAAY,iBAAiB,CAAEU,EAAO4C,aAAe5C,EAAO4C,YAAYhF,OAAS,EAAGwB,EAAG,oBAAoB,CAACE,YAAY,sBAAsBC,MAAM,CAAC,KAAO,UAAU,MAAQS,EAAO4C,aAAa7B,GAAG,CAAC,MAAQ,SAASe,GAAQ,OAAO7C,EAAI4D,YAAY7C,OAAYf,EAAIuB,KAAMR,EAAa,OAAEZ,EAAG,oBAAoB,CAACE,YAAY,sBAAsBC,MAAM,CAAC,KAAO,cAAcN,EAAIuB,MAAM,QAAO,GAAkC,IAA9BvB,EAAI6D,eAAelF,QAAgBqB,EAAIgD,OAAOrE,OAAS,EAAGwB,EAAG,MAAM,CAACE,YAAY,2CAA2C,CAACF,EAAG,oBAAoB,CAACG,MAAM,CAAC,KAAO,WAAW,KAAO,QAAQH,EAAG,IAAI,CAACE,YAAY,mBAAmB,CAACL,EAAI6B,GAAG,iBAAiB,GAAkC,IAA9B7B,EAAI6D,eAAelF,QAAgBqB,EAAI8D,QAAS3D,EAAG,MAAM,CAACE,YAAY,2CAA2C,CAACF,EAAG,oBAAoB,CAACG,MAAM,CAAC,KAAO,WAAW,KAAO,GAAG,KAAO,QAAQH,EAAG,IAAI,CAACE,YAAY,mBAAmB,CAACL,EAAI6B,GAAG,sBAAsB,GAAkC,IAA9B7B,EAAI6D,eAAelF,QAAsC,IAAtBqB,EAAIgD,OAAOrE,OAAcwB,EAAG,MAAM,CAACE,YAAY,2CAA2C,CAACF,EAAG,oBAAoB,CAACG,MAAM,CAAC,KAAO,WAAW,KAAO,QAAQH,EAAG,IAAI,CAACE,YAAY,mBAAmB,CAACL,EAAI6B,GAAG,oEAAoE,GAAG7B,EAAIuB,OAAOpB,EAAG,MAAM,CAACE,YAAY,yCAAyC,CAACF,EAAG,MAAM,CAACE,YAAY,+DAA+DyB,GAAG,CAAC,MAAQ9B,EAAI+D,iBAAiB,CAAC5D,EAAG,IAAI,CAACE,YAAY,uBAAuB,CAACL,EAAI6B,GAAG,sBAAuB7B,EAAIgE,eAAerF,OAAS,IAAMqB,EAAIiE,aAAc9D,EAAG,IAAI,CAACE,YAAY,6CAA6C,CAACL,EAAI6B,GAAG7B,EAAImC,GAAGnC,EAAIgE,eAAerF,WAAWqB,EAAIuB,KAAKpB,EAAG,MAAM,CAACE,YAAY,iBAAiB,CAACF,EAAG,oBAAoB,CAACE,YAAY,sBAAsBC,MAAM,CAAC,KAAQN,EAAIiE,aAAgC,eAAjB,mBAAoC,KAAMjE,EAAgB,aAAEG,EAAG,MAAMH,EAAImD,GAAInD,EAAkB,gBAAE,SAASe,GAAQ,OAAOZ,EAAG,MAAM,CAAChB,IAAI4B,EAAOqC,GAAG/C,YAAY,6EAA6E,CAACF,EAAG,IAAI,CAACE,YAAY,QAAQ,CAACL,EAAI6B,GAAG7B,EAAImC,GAAGpB,EAAOC,QAAQqB,aAA4D,IAA/CrC,EAAIkE,iBAAiBC,QAAQpD,EAAOG,MAAcf,EAAG,MAAM,CAACE,YAAY,iBAAiB,CAACF,EAAG,oBAAoB,CAACE,YAAY,oDAAoDC,MAAM,CAAC,KAAO,WAAWH,EAAG,oBAAoB,CAACE,YAAY,sDAAsDC,MAAM,CAAC,KAAO,SAASwB,GAAG,CAAC,MAAQ,SAASe,GAAQ,OAAO7C,EAAIoE,oBAAoBrD,EAAOG,KAAMH,EAAOC,QAAQqB,QAAStB,EAAOC,QAAQuB,iBAAiB,IAAmD,IAA/CvC,EAAIkE,iBAAiBC,QAAQpD,EAAOG,MAAcf,EAAG,MAAM,CAACA,EAAG,oBAAoB,CAACE,YAAY,OAAOC,MAAM,CAAC,KAAO,WAAW,KAAO,OAAO,GAAGN,EAAIuB,UAAS,GAAGvB,EAAIuB,UACvzK,EAAkB,G,8FC4FD,EAArB,yG,0BAQY,EAAA8C,QAAS,EACT,EAAAC,YAAa,EACb,EAAAL,cAAe,EACf,EAAAjB,OAAS,GAET,EAAAkB,iBAA6B,GAbzC,gEA+BQ1E,KAAK8E,YAAc9E,KAAK8E,aA/BhC,uCAkCQ9E,KAAKyE,cAAgBzE,KAAKyE,eAlClC,8FA2C8BM,EAAmBC,GA3CjD,kFA4C4B,OAAjBD,EAAOrC,YAAiDd,IAA/BmD,EAAOrC,MAAME,GAAGG,YAA8BkC,KAAKC,UAAUH,EAAOrC,SAAWuC,KAAKC,UAAUF,EAAOtC,SACjI1C,KAAKmF,gBA7Cb,iJAiD0B5D,GAClBvB,KAAKkB,SAAS,aAAcK,GAC5BvB,KAAKoF,iBAnDb,wCAuDiC,cAArBpF,KAAKoB,YACLpB,KAAKmB,WAELnB,KAAKkB,SAAS,eA1D1B,qGA8DqCQ,EAAcuB,EAAcF,GA9DjE,4FA+DQ/C,KAAK0E,iBAAiBW,KAAK3D,QACTE,IAAfmB,EAhEX,gCAiE+B/C,KAAKsF,sBAAsB5D,GAjE1D,OAiEYqB,EAjEZ,cAmEYwC,EAAOvF,KACXA,KAAKkC,YAAY,CACbsD,QAAS,CACLC,KAAM,YACNC,SAAQ,UAAEH,EAAKpD,KAAKO,aAAZ,aAAE,EAAiBE,GAAGC,QAC9BS,OAAO5B,GAEXiE,SAAU,WACNJ,EAAK1D,gBA3ErB,0JAgFiCH,GACzB,OAAOkE,MAAM,mDAAoD,CAACC,QAAS,CACvE,eAAgB,oBACjBC,OAAQ,OAAQC,KAAMd,KAAKC,UAAU,CAACxD,KAAMA,MAC9CsE,MAAK,SAACC,GAAD,OAAcA,EAASC,UAC5BF,KAJM,yDAID,WAAOG,GAAP,0GACKA,EAAK9G,MADV,2CAJC,uDAMJ+G,OAAM,SAACC,GACN,MAAMA,OAxFlB,kCA4FuB9E,GAEf+E,SAASC,MAAMC,wBAAf,wBAAwDjF,EAAOkF,kBA9FvE,gCAsHQzG,KAAKyE,aAAezE,KAAKwE,eAAerF,OAAS,IAtHzD,uCAyHyB,WACba,KAAKmC,KAAKO,QAEV4D,SAASC,MAAMG,iBAAiB1G,KAAKmC,KAAKO,MAAME,GAAGG,YACnD/C,KAAK6E,QAAS,EACd8B,YAAW,kBAAM,EAAK9B,QAAS,IAAO,QA9HlD,iCAqCkB,MACJ+B,EAAQ,UAAG5G,KAAKmC,KAAKO,aAAb,aAAG,EAAiBmE,SAASC,MAAK,SAACC,GAAD,MAA8B,WAAvBA,EAAEC,oBACzD,YAAoBpF,IAAbgF,GAAuC,OAAbA,EAAoBA,EAASK,OAAS,cAvC/E,qCAiGsB,WACRC,EAAyB,GAI/B,OAHAC,OAAOhH,KAAKH,KAAKqB,UAAU+F,SAAQ,SAACrD,GAChCmD,EAAOnD,GAAa,EAAK1C,SAAS0C,GAAWsD,QAAO,SAACC,GAAD,OAAQA,EAAEC,QAAMpI,UAEjE+H,IAtGf,qCAyGsB,WACV5F,EAAUtB,KAAKsB,QAAQA,QAAQ+F,QAAO,SAACG,GAAD,OAAOA,EAAEC,YAAUC,MAAK,SAACF,EAAGG,GAAJ,OAAUC,OAAOD,EAAE1D,QAAU2D,OAAOJ,EAAEvD,WAIxG,OAHIjE,KAAKwD,OAAOrE,OAAS,IACrBmC,EAAUA,EAAQ+F,QAAO,SAACG,GAAD,OAAmD,IAA5CA,EAAEhG,QAAQqB,QAAQ8B,QAAQ,EAAKnB,YAE5DlC,IA9Gf,qCAiHsB,WACd,OAAOtB,KAAKsB,QAAQuG,SAASR,QAAO,SAAC9F,GAAD,YAAoEK,IAAxD,EAAKyC,eAAeyC,MAAK,SAAC3I,GAAD,OAAOA,EAAEyF,KAAOrC,EAAOqC,aAlHxG,GAAsC,QAElC,gBADC,eAAM,S,2BAGP,gBADC,eAAO,gBAAiB,CAACkE,UAAW,U,oCAGrC,gBADC,eAAO,gB,kCAWR,gBADC,kB,8BAGD,gBADC,kB,8BAGD,gBADC,kB,kCAGD,gBADC,kB,+BAGD,gBADC,kB,+BAGD,gBADC,kB,+BAGD,gBADC,kB,iCAgBD,gBADC,eAAM,OAAQ,CAACC,MAAM,K,2BAKrB,MA/CgB,EAAQ,gBAX5B,eAAU,CACPC,MAAO,CACH,WACA,WACA,cACA,WACA,UACA,eACA,cAGa,WC7FmY,I,wBCQpZC,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,KACA,MAIa,EAAAA,E,QCnBX,EAAS,WAAa,IAAIzH,EAAIR,KAASS,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,mCAAmC,CAACF,EAAG,KAAK,CAACE,YAAY,aAAa,CAACL,EAAI6B,GAAG,gBAAgB1B,EAAG,MAAM,CAACE,YAAY,KAAK,CAAEL,EAAI0H,QAAQ/I,OAAS,EAAGwB,EAAG,MAAM,CAACkD,MAAO,UAAYrD,EAAI2H,YAAc,4BAA6B,CAAC3H,EAAI6B,GAAG,IAAI7B,EAAImC,GAAGnC,EAAI0H,SAAS,OAAO1H,EAAIuB,KAAKpB,EAAG,YAAY,CAACG,MAAM,CAAC,MAAQ,cAAc,MAAQN,EAAIuC,YAAYqF,MAAM,CAACvI,MAAOW,EAAc,WAAEmF,SAAS,SAAU0C,GAAM7H,EAAIuC,WAAWsF,GAAKlF,WAAW,gBAAgBxC,EAAG,aAAa,CAACE,YAAY,wBAAwBC,MAAM,CAAC,MAAQ,UAAU,SAAWN,EAAI2B,KAAKmC,SAAShC,GAAG,CAAC,MAAQ9B,EAAI8H,SAAS,CAAC9H,EAAI6B,GAAG,UAAU,MAClsB,EAAkB,G,YC8BD,EAArB,yG,0BAMU,EAAA6F,QAAU,GACV,EAAAC,YAAoC,UACpC,EAAApF,WAAa,GARvB,iNAWM/C,KAAKkI,QAAU,GACgB,IAA3BlI,KAAK+C,WAAW5D,OAZ1B,oDAeSa,KAAK+C,cAAL,UAAoB/C,KAAKmC,KAAKO,aAA9B,aAAoB,EAAiBE,GAAGG,YAfjD,uBAgBQ/C,KAAKmI,YAAc,SACnBnI,KAAKkI,QAAU,uCAjBvB,0CAoBoDlI,KAAKuI,oBAAoB,CAACxF,WAAY/C,KAAK+C,aApB/F,OAoBYkD,EApBZ,OAqB8B,YAApBA,EAASuC,QACTxI,KAAKkI,QAAU,sBACflI,KAAKmI,YAAc,UACnBnI,KAAK+C,WAAa,GACdkD,EAASvE,OAKf1B,KAAKmI,YAAc,SACnBnI,KAAKkI,QAAUjC,EAASiC,SA/BhC,+GAAuC,QAErC,gBADC,eAAM,S,2BAGP,gBADC,eAAO,sBAAuB,CAACJ,UAAW,U,0CAHxB,EAAS,gBAN7B,eAAU,CACPW,WAAY,CACR,YAAaC,EAAA,KACb,aAAcC,EAAA,SAGD,WC/BiY,ICOlZ,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,KACA,MAIa,I,QClBX,EAAS,WAAa,IAAInI,EAAIR,KAASS,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,mCAAmC,CAACF,EAAG,MAAM,CAACE,YAAY,8BAA8B,CAACF,EAAG,KAAK,CAACE,YAAY,oCAAoCuB,YAAY,CAAC,gBAAgB,aAAa,CAAC5B,EAAI6B,GAAG7B,EAAImC,GAAGnC,EAAIe,OAAOC,QAAQqB,YAAYlC,EAAG,MAAM,CAACE,YAAY,qBAAqB,CAACF,EAAG,oBAAoB,CAACE,YAAY,kDAAkDC,MAAM,CAAC,KAAO,MAAM,MAAQ,SAASwB,GAAG,CAAC,MAAQ9B,EAAIyB,eAAetB,EAAG,oBAAoB,CAACE,YAAY,kDAAkDC,MAAM,CAAC,KAAO,QAAQ,MAAQ,UAAUwB,GAAG,CAAC,MAAQ9B,EAAIwB,gBAAiBxB,EAAIe,OAAoB,cAAEZ,EAAG,oBAAoB,CAACE,YAAY,kDAAkDC,MAAM,CAAC,KAAO,SAASwB,GAAG,CAAC,MAAQ9B,EAAIoI,cAAcpI,EAAIuB,MAAM,KAAKpB,EAAG,MAAM,CAACkI,IAAI,OAAOhI,YAAY,4DAA4DyB,GAAG,CAAC,OAAS9B,EAAIsI,WAAWtI,EAAImD,GAAInD,EAAkB,gBAAE,SAAS8G,GAAG,OAAO3G,EAAG,MAAM,CAAChB,IAAIsF,KAAKC,UAAUoC,GAAGzG,YAAY,iBAAiB,CAACF,EAAG,MAAM,CAACkD,OAAQyD,EAAEyB,SAAWvI,EAAIuD,UAAY,0BAA4B,kBAAoB,uBAAwB,CAACpD,EAAG,IAAI,CAACE,YAAY,kCAAkCuC,SAAS,CAAC,UAAY5C,EAAImC,GAAGnC,EAAIwI,QAAQ1B,EAAE2B,WAAW3G,GAAG,CAAC,MAAQ9B,EAAI0I,kBAAkBvI,EAAG,QAAQ,CAACkD,OAAQyD,EAAEyB,SAAWvI,EAAIuD,UAAY,sBAAwB,IAAM,uBAAwB,CAACvD,EAAI6B,GAAG7B,EAAImC,GAAGnC,EAAI2I,GAAG,gBAAP3I,CAAwB8G,EAAE8B,KAAO,gBAAgB,GAAGzI,EAAG,MAAM,CAACE,YAAY,+BAA+B,CAAGL,EAAIe,OAAO0C,OAA6HzD,EAAIuB,KAAzHpB,EAAG,QAAQ,CAACE,YAAY,uBAAuB,CAACL,EAAI6B,GAAG7B,EAAImC,GAAGnC,EAAIe,OAAOC,QAAQqB,SAAS,2BAAoClC,EAAG,MAAM,CAACE,YAAY,8CAA8C,CAACF,EAAG,QAAQ,CAACqC,WAAW,CAAC,CAACC,KAAK,QAAQC,QAAQ,UAAUrD,MAAOW,EAAc,WAAE2C,WAAW,eAAeU,MAAM,kMAAkM/C,MAAM,CAAC,UAAYN,EAAIe,OAAO0C,QAAQb,SAAS,CAAC,MAAS5C,EAAc,YAAG8B,GAAG,CAAC,QAAU,SAASe,GAAQ,OAAIA,EAAOoC,KAAKd,QAAQ,QAAQnE,EAAI6I,GAAGhG,EAAOiG,QAAQ,QAAQ,GAAGjG,EAAO1D,IAAI,SAAkB,KAAca,EAAI+I,KAAKlG,IAAS,MAAQ,SAASA,GAAWA,EAAOC,OAAOC,YAAqB/C,EAAIgJ,WAAWnG,EAAOC,OAAOzD,WAAUc,EAAG,MAAM,CAACE,YAAY,oCAAoC,CAACF,EAAG,oBAAoB,CAACG,MAAM,CAAC,KAAO,kBAAkB,OAA0B,OAAlBN,EAAIiJ,UAAoB9I,EAAG,WAAW,CAACG,MAAM,CAAC,QAA4B,OAAlBN,EAAIiJ,WAAoBnH,GAAG,CAAC,gBAAgB9B,EAAIkJ,YAAY,CAAC/I,EAAG,oBAAoB,CAACG,MAAM,CAAC,MAAQ,2CAA2C,QAAW,yBAA2BN,EAAIiJ,UAAY,8LAA+L,UAAYjJ,EAAImJ,eAAe,SAAWnJ,EAAIkJ,cAAc,GAAGlJ,EAAIuB,MAAM,IACvhG,EAAkB,GCDlB,G,oBAAS,WAAa,IAAIvB,EAAIR,KAASS,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,2BAA2B,CAACF,EAAG,KAAK,CAACE,YAAY,iBAAiB,CAACL,EAAI6B,GAAG7B,EAAImC,GAAGnC,EAAIoJ,UAAUjJ,EAAG,MAAM,CAACA,EAAG,IAAI,CAACE,YAAY,eAAe,CAACL,EAAI6B,GAAG7B,EAAImC,GAAGnC,EAAI0H,cAAcvH,EAAG,KAAK,CAACE,YAAY,cAAcF,EAAG,MAAM,CAACE,YAAY,uBAAuB,CAACF,EAAG,aAAa,CAACE,YAAY,yCAAyCC,MAAM,CAAC,MAAQ,SAAS,YAAY,sBAAsBwB,GAAG,CAAC,MAAQ9B,EAAIqJ,WAAW,CAACrJ,EAAI6B,GAAG,QAAQ1B,EAAG,aAAa,CAACE,YAAY,yCAAyCC,MAAM,CAAC,MAAQ,UAAU,YAAY,sBAAsBwB,GAAG,CAAC,MAAQ9B,EAAIsJ,YAAY,CAACtJ,EAAI6B,GAAG,UAAU,OAC1sB,EAAkB,GC4BD,EAArB,qIAA+C,QAA1B,EAAiB,gBAZrC,eAAU,CACPY,KAAM,oBACN+E,MAAO,CACH,QACA,UACA,YACA,YAEJS,WAAY,CACV,aAAcE,EAAA,SAGC,WC7ByY,ICO1Z,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,KACA,MAIa,I,oBC6CM,EAArB,yG,0BAMY,EAAAa,WAAa,GAWb,EAAAO,mBAA+B,CAAC,kBAAmB,qBAAsB,kBAAmB,eAAgB,YAAa,YAEzH,EAAAN,UAA2B,KAE3B,EAAAO,WAAa,EACb,EAAAC,aAAc,EAtB1B,6DAyBQjK,KAAKyJ,UAAY,OAzBzB,8BA4BmBS,GACX,IAAMC,EAAU,8EAChB,OAAOD,EAAKE,QAAQD,GAAU,SAASE,GACnC,MAAO,YAAcA,EAAM,qBAAuBA,EAAM,YA/BpE,0CA2CQ,IAAM5I,EAAgBzB,KAAKsK,MAAM7I,KAC3B8I,EAAc9I,EAAK+I,UACd,OAAPD,GACAA,EAAGE,eAAe,CAACC,SAAU,aA9CzC,qCAkD0BC,GAClB,GAAmB,MAAhBA,EAAMrH,QACuB,MAAzBqH,EAAMrH,OAAOsH,QAAgB,CAC5B,IAAMP,EAAMM,EAAMrH,OAAOuH,KACnBC,EAAST,EAAIU,MAAM,0DAA0D,GAC7EC,EAAoBhL,KAAK+J,mBAAmBjD,MAAK,SAACmE,GAAD,OAA8B,IAAvBH,EAAOnG,QAAQsG,WACpDrJ,IAAtBoJ,IACCL,EAAMO,iBACNlL,KAAKyJ,UAAYkB,EAAMrH,OAAOuH,SA1DlD,iCAiEQ,IAAMpJ,EAAgBzB,KAAKsK,MAAM7I,KAC3B0J,EAAM1J,EAAK2J,UACXC,EAAU5J,EAAK6J,aAAe7J,EAAK8J,aACtCJ,EAAMnL,KAAKgK,YAAc,EACxBhK,KAAKiK,aAAc,EACbkB,GAAOE,IACbrL,KAAKiK,aAAc,GAEvBjK,KAAKgK,WAAamB,IAzE1B,qCA4EuB,WACT1J,EAAgBzB,KAAKsK,MAAM7I,KACrBA,EAAK2J,UACD3J,EAAK6J,aAAe7J,EAAK8J,aACpCvL,KAAKiK,aACNtD,YAAW,WACR,EAAK6E,sBACL,MAnFf,gCAwFQxL,KAAKwL,sBAxFb,6BA4FQxL,KAAKkC,YAAYlC,KAAKwJ,YACtBxJ,KAAKwJ,WAAa,KA7F1B,uCAkGQlD,SAASC,MAAMC,wBAAwBxG,KAAKyJ,WAC5CzJ,KAAKyJ,UAAY,OAnGzB,mCAwGQnD,SAASC,MAAMC,wBAAf,uBAAuDxG,KAAKuB,OAAOkK,kBAxG3E,qCAoCQ,OAAKzL,KAAKqB,SAGHrB,KAAKqB,SAASqG,MAAK,SAACF,EAAYG,GAAb,OAA4BH,EAAE4B,KAAOzB,EAAEyB,QAFtD,OArCnB,GAAwC,QAEpC,gBADC,kB,6BAGD,gBADC,kB,gCAKD,gBADC,kB,mCAGD,gBADC,kB,kCAID,gBADC,kB,+BAGD,gBADC,kB,kCAdgB,EAAU,gBAhB9B,eAAU,CACPX,WAAY,CACR,YAAaC,EAAA,KACb,aAAcC,EAAA,KACd+C,kBAAA,EACAC,WAAA,MAEJ3D,MAAO,CACH,SACA,YACA,WACA,cACA,eACA,kBAGa,WC/DkY,ICQnZ,G,UAAY,eACd,EACA,EACA,GACA,EACA,KACA,KACA,OAIa,I,QC4BM,EAArB,yG,0BASY,EAAA4D,WAAY,EACZ,EAAA9J,gBAA0B,EAC1B,EAAAV,YAAc,GACd,EAAAG,OAAwB,KACxB,EAAAF,SAAqB,GACrB,EAAAC,QAA8B,CAACA,QAAS,GAAIuG,SAAU,IAdlE,yHA0B8B9C,EAAmBC,GA1BjD,kGA2BQ6G,QAAQC,IAAI,eAAZ,UAA4B/G,EAAOrC,aAAnC,aAA4B,EAAcmE,SAAU7G,KAAK4L,eAAwFhK,KAA7E,UAAAmD,EAAOrC,aAAP,eAAcmE,SAASC,MAAK,SAACC,GAAD,MAAmC,WAAvBA,EAAEC,uBAAiDhH,KAAK4L,gBACpFhK,KAA7E,UAAAmD,EAAOrC,aAAP,eAAcmE,SAASC,MAAK,SAACC,GAAD,MAAmC,WAAvBA,EAAEC,sBAAiDhH,KAAK4L,YAC/F5L,KAAK4L,WAAY,EACd7G,EAAOrC,OACN1C,KAAK6B,WAAWkD,EAAOrC,MAAME,GAAGlB,KAAKqK,MAEzCC,aAAY,WACLjH,EAAOrC,OACN,EAAKb,WAAWkD,EAAOrC,MAAME,GAAGlB,KAAKqK,QAE1C,MArCf,6IAyCsBE,GAAiB,IAGL,EAHK,QAC/BJ,QAAQC,IAAI,mBACZ9L,KAAK8B,gBAAiB,OACNF,IAAbqK,KACCA,EAAQ,UAAGjM,KAAKmC,KAAKO,aAAb,aAAG,EAAiBE,GAAGlB,KAAKqK,MAErCG,MAAMC,QAAQF,KACbA,EAAWA,EAAS,IAExBjM,KAAKoM,eAAe,CAAC5G,QAAS,CAACC,KAAM,aAAc/D,KAAMuK,GAAWtG,SAAU,SAACQ,GAC3E0F,QAAQC,IAAI,eACZ3F,EAAOA,EAAK7E,QACZ,OAAI+K,IAAI,EAAK/K,QAAS,UAAY6E,EAAK7E,SACvC,IAAIuG,EAAW,EAAKvG,QAAQuG,SAC5BA,EAAW1B,EAAK0B,SAASyE,KAAI,SAACC,GAC1B,IAAMC,EAAW,EAAKlL,QAAQuG,SAASf,MAAK,SAAC3I,GAAD,OAAOA,EAAEqD,QAAQE,OAAS6K,EAAQ/K,QAAQE,QAKtF,YAJiBE,IAAb4K,IACAD,EAAQ/K,QAAQuB,WAAayJ,EAAShL,QAAQuB,WAC9CwJ,EAAQ/K,QAAQqB,QAAU2J,EAAShL,QAAQqB,SAExC0J,KAEX,OAAIF,IAAI,EAAK/K,QAAS,WAAYuG,GAClC,EAAK/F,gBAAiB,OAhElC,oCA2EQwE,SAASC,MAAMC,wBAAwB,iDA3E/C,+BAgFQF,SAASmG,QAAQC,kBAAiB,SAACC,GAC3BA,GAA4B,YAAlBA,EAAOnE,QAAwBmE,EAAOC,QAAUD,EAAOC,OAAOhJ,IAEvE0C,SAASmG,QAAQI,WAAWF,EAAOC,OAAOhJ,GAAI,IAAK+I,EAAOC,OAAOE,aAnFlF,gCA0FQxG,SAASmG,QAAQC,kBAAiB,SAACC,GAC3BA,GAA4B,YAAlBA,EAAOnE,QAAwBmE,EAAOC,QAAUD,EAAOC,OAAOhJ,IAEvE0C,SAASmG,QAAQI,WAAWF,EAAOC,OAAOhJ,GAAI,IAAK+I,EAAOC,OAAOE,aA7FlF,+BAkGoBC,EAAcxL,GAAe,WACzC,GAAIvB,KAAKoB,cAAgB2L,GACjB/M,KAAKuB,QAAUA,GAAUvB,KAAKuB,OAAOG,OAASH,EAAOG,KACrD1B,KAAKmB,eAFb,CAOA,GADAnB,KAAKgN,SACDzL,EAAQ,CAER,GADAvB,KAAKuB,OAASA,EACVvB,KAAKqB,SAASE,EAAOC,QAAQC,KAAKC,KAAKC,QAAS,CAChD,IAAIN,EAAWrB,KAAKqB,SAASE,EAAOC,QAAQC,KAAKC,KAAKC,QACtDN,EAAWA,EAASiL,KAAI,SAACpE,GAErB,OADAA,EAAQX,MAAO,EACRW,KAEX,OAAImE,IAAIrM,KAAKqB,SAAUrB,KAAKuB,OAAOC,QAAQC,KAAKC,KAAKC,OAAQN,GAEjErB,KAAKoF,eAETuB,YAAW,WACP,EAAKvF,YAAc2L,IACpB,QAxHX,iCA4HQ/M,KAAKiN,UACLjN,KAAKuB,OAAS,KACdvB,KAAKoB,YAAc,KA9H3B,yLAkI6B,OAAhBpB,KAAKuB,aAAwCK,IAArB5B,KAAKuB,OAAOG,KAlIjD,iEAqI8B1B,KAAKkN,mBAAmBlN,KAAKuB,OAAOG,MArIlE,OAqIcyL,EArId,OAsI+B,kBAAZA,GAGHA,IACAnN,KAAKoM,eAAe,CAAC5G,QAAS,CAACC,KAAM,cAAe/D,KAAM1B,KAAKuB,OAAOG,QACtE1B,KAAKmB,WACHnB,KAAKmC,KAAKO,OACR1C,KAAK6B,WAAW7B,KAAKmC,KAAKO,MAAME,GAAGlB,KAAKqK,OA7I5D,mSAoJ4B,OAAhB/L,KAAKuB,aAAwCK,IAArB5B,KAAKuB,OAAOG,KApJhD,iEAuJ8B1B,KAAKkN,mBAAmBlN,KAAKuB,OAAOG,MAvJlE,OAuJcyL,EAvJd,OAwJ+B,kBAAZA,GAGHA,IACAnN,KAAKmB,WACFnB,KAAKmC,KAAKO,OACT1C,KAAK6B,WAAW7B,KAAKmC,KAAKO,MAAME,GAAGlB,KAAKqK,OA9J5D,2IAoKuB7D,GAQf,IAAI7G,EAPD6G,EAAQ/I,OAAS,GAGA,OAAhBa,KAAKuB,QAAuC,OAApBvB,KAAKmC,KAAKO,QAGtC1C,KAAKoM,eAAe,CAAC5G,QAAS,CAACC,KAAM,iBAAkB2H,KAAMpN,KAAKuB,OAAOC,QAAQC,KAAKC,KAAKC,OAAQuG,aAG/F7G,OADwDO,IAAxD5B,KAAKqB,SAASrB,KAAKuB,OAAOC,QAAQC,KAAKC,KAAKC,QACjC,GAEA3B,KAAKqB,SAASrB,KAAKuB,OAAOC,QAAQC,KAAKC,KAAKC,QAE3DN,EAASgE,KAAK,CAAC4D,QAASf,EAASkB,MAAM,IAAIiE,MAAOC,UAAWvE,OAAQ/I,KAAKmC,KAAKO,MAAME,GAAGnB,KAAKC,KAAK6L,MAAOhG,MAAM,IAC/G,OAAI8E,IAAIrM,KAAKqB,SAAUrB,KAAKuB,OAAOC,QAAQC,KAAKC,KAAKC,OAAQN,MAnLrE,gCAsLkB,WACVrB,KAAKiN,UAILjN,KAAKwN,qBAAoB,SAACrH,GACtB,GAAoB,YAAjBA,EAAKsH,SACJ,GAAoB,YAAjBtH,EAAKuH,QAAsB,OAMtBrM,EALAsM,EAAOxH,EAAKiH,KACZlF,EAAU/B,EAAK+B,QACnB,IAA0D,IAAvD,EAAK0F,SAASA,SAASC,aAAalJ,QAAQgJ,GAC3C,OAIAtM,OADwBO,IAAxB,EAAKP,SAASsM,GACH,GAEA,EAAKtM,SAASsM,GAE7BtM,EAASgE,KAAK,CAAC4D,QAASf,EAASa,OAAQ4E,EAAMvE,MAAM,IAAIiE,MAAOC,UAAW/F,KAA2B,eAArB,EAAKnG,cAAgC,YAAKG,cAAL,eAAaC,QAAQC,KAAKC,KAAKC,UAAWgM,IAChK,OAAItB,IAAI,EAAKhL,SAAUsM,EAAMtM,SAE9B,GAAoB,SAAjB8E,EAAKsH,QAAmB,CAChBtH,EAAKA,KACnB,GAAiB,cAAdA,EAAKV,KAAqB,CACzB,IAAMoC,EAAW,EAAKvG,QAAQuG,SACxB2E,EAAW3E,EAASf,MAAK,SAACgH,GAAD,OAAOA,EAAEtM,QAAQC,KAAKC,KAAKC,SAAWwE,EAAKiH,QAC1E,QAAiBxL,IAAb4K,EACA,OAEJ,IAAIhL,EAAU2E,EAAK3E,QACnBqG,EAASxC,KAAK,CAAC7D,UAASyB,KAAMzB,EAAQqB,QAAS4E,UAAU,IACzD,OAAI4E,IAAI,EAAK/K,QAAS,WAAYuG,GAEnC,EAAK1F,KAAKO,OACT,EAAKb,WAAW,EAAKM,KAAKO,MAAME,GAAGlB,KAAKqK,YAzN5D,wCAoEyB,MACXgC,EAAC,UAAG/N,KAAKmC,KAAKO,aAAb,aAAG,EAAiBmE,SAASC,MAAK,SAACC,GAAD,MAA8B,WAAvBA,EAAEC,oBAClD,YAAapF,IAANmM,GAAwB,MAALA,MAtElC,GAAwC,QAEpC,gBADC,eAAM,S,2BAGP,gBADC,eAAM,a,+BAGP,gBADC,eAAM,c,gCAEgB,gBAAtB,eAAO,gB,qCAUR,gBADC,eAAO,eAAgB,CAACjG,UAAW,U,yCAIpC,gBADC,eAAO,eAAgB,CAACA,UAAW,c,mCAIpC,gBADC,eAAO,wB,0CAIR,gBADC,eAAM,OAAQ,CAACC,MAAM,K,2BAcrB,MAvCgB,EAAU,gBAT9B,eAAU,CACTU,WAAY,CACVuF,WAAA,KACA,eAAgBC,EAChBC,UAAA,EACAC,WAAA,EACA,aAAcxF,EAAA,SAGG,WC/CgX,ICQjY,G,UAAY,eACd,EACApI,EACAiC,GACA,EACA,KACA,KACA,OAIa,e,2CCnBf,yBAAoe,EAAG","file":"js/chat.1da5d979.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FriendChat.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FriendChat.vue?vue&type=style&index=0&lang=css&\"","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar global = require('../internals/global');\nvar isForced = require('../internals/is-forced');\nvar redefine = require('../internals/redefine');\nvar has = require('../internals/has');\nvar classof = require('../internals/classof-raw');\nvar inheritIfRequired = require('../internals/inherit-if-required');\nvar toPrimitive = require('../internals/to-primitive');\nvar fails = require('../internals/fails');\nvar create = require('../internals/object-create');\nvar getOwnPropertyNames = require('../internals/object-get-own-property-names').f;\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar defineProperty = require('../internals/object-define-property').f;\nvar trim = require('../internals/string-trim').trim;\n\nvar NUMBER = 'Number';\nvar NativeNumber = global[NUMBER];\nvar NumberPrototype = NativeNumber.prototype;\n\n// Opera ~12 has broken Object#toString\nvar BROKEN_CLASSOF = classof(create(NumberPrototype)) == NUMBER;\n\n// `ToNumber` abstract operation\n// https://tc39.github.io/ecma262/#sec-tonumber\nvar toNumber = function (argument) {\n  var it = toPrimitive(argument, false);\n  var first, third, radix, maxCode, digits, length, index, code;\n  if (typeof it == 'string' && it.length > 2) {\n    it = trim(it);\n    first = it.charCodeAt(0);\n    if (first === 43 || first === 45) {\n      third = it.charCodeAt(2);\n      if (third === 88 || third === 120) return NaN; // Number('+0x1') should be NaN, old V8 fix\n    } else if (first === 48) {\n      switch (it.charCodeAt(1)) {\n        case 66: case 98: radix = 2; maxCode = 49; break; // fast equal of /^0b[01]+$/i\n        case 79: case 111: radix = 8; maxCode = 55; break; // fast equal of /^0o[0-7]+$/i\n        default: return +it;\n      }\n      digits = it.slice(2);\n      length = digits.length;\n      for (index = 0; index < length; index++) {\n        code = digits.charCodeAt(index);\n        // parseInt parses a string to a first unavailable symbol\n        // but ToNumber should return NaN if a string contains unavailable symbols\n        if (code < 48 || code > maxCode) return NaN;\n      } return parseInt(digits, radix);\n    }\n  } return +it;\n};\n\n// `Number` constructor\n// https://tc39.github.io/ecma262/#sec-number-constructor\nif (isForced(NUMBER, !NativeNumber(' 0o1') || !NativeNumber('0b1') || NativeNumber('+0x1'))) {\n  var NumberWrapper = function Number(value) {\n    var it = arguments.length < 1 ? 0 : value;\n    var dummy = this;\n    return dummy instanceof NumberWrapper\n      // check on 1..constructor(foo) case\n      && (BROKEN_CLASSOF ? fails(function () { NumberPrototype.valueOf.call(dummy); }) : classof(dummy) != NUMBER)\n        ? inheritIfRequired(new NativeNumber(toNumber(it)), dummy, NumberWrapper) : toNumber(it);\n  };\n  for (var keys = DESCRIPTORS ? getOwnPropertyNames(NativeNumber) : (\n    // ES3:\n    'MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,' +\n    // ES2015 (in case, if modules with ES2015 Number statics required before):\n    'EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,' +\n    'MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger'\n  ).split(','), j = 0, key; keys.length > j; j++) {\n    if (has(NativeNumber, key = keys[j]) && !has(NumberWrapper, key)) {\n      defineProperty(NumberWrapper, key, getOwnPropertyDescriptor(NativeNumber, key));\n    }\n  }\n  NumberWrapper.prototype = NumberPrototype;\n  NumberPrototype.constructor = NumberWrapper;\n  redefine(global, NUMBER, NumberWrapper);\n}\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatWindow.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatWindow.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"theme-dark\",attrs:{\"id\":\"app\"}},[_c('title-bar'),(!_vm.websocket.socket.isConnected)?_c('div',{staticClass:\"flex flex-col h-full justify-center\"},[_c('font-awesome-icon',{staticClass:\"mx-auto\",staticStyle:{\"font-size\":\"25vw\"},attrs:{\"icon\":\"sync-alt\",\"spin\":\"\"}})],1):(_vm.isMinecraftLinked)?_c('div',{staticClass:\"flex flex-row h-full\"},[_c('friends-list',{attrs:{\"showPage\":_vm.showPage,\"hidePage\":_vm.hidePage,\"currentPage\":_vm.currentPage,\"messages\":_vm.messages,\"friends\":_vm.friends,\"activeFriend\":_vm.friend !== null ? _vm.friend.profile.chat.hash.medium : undefined,\"getFriends\":_vm.getFriends,\"loading\":_vm.loadingFriends}}),_c('div',{staticClass:\"bg-navbar flex-1\"},[(_vm.currentPage === 'addFriend')?_c('AddFriend'):_vm._e(),(_vm.currentPage === 'chatFriend' && _vm.friend !== null)?_c('FriendChat',{key:_vm.friend.profile.chat.hash.medium,attrs:{\"friend\":_vm.friend,\"removeFriend\":_vm.removeFriend,\"blockFriend\":_vm.blockFriend,\"shortHash\":_vm.friend.profile.chat.hash.medium,\"messages\":_vm.messages[_vm.friend.profile.chat.hash.medium],\"sendMessage\":_vm.sendMessage}}):_vm._e()],1)],1):(_vm.auth.loggingIn)?_c('div',{staticClass:\"flex flex-col h-full justify-center\"},[_c('font-awesome-icon',{staticClass:\"mx-auto\",staticStyle:{\"font-size\":\"25vw\"},attrs:{\"icon\":\"sync-alt\",\"spin\":\"\"}})],1):_c('div',{staticClass:\"flex flex-col h-full justify-center\"},[_c('font-awesome-icon',{staticClass:\"mx-auto\",staticStyle:{\"font-size\":\"25vw\"},attrs:{\"icon\":\"user\"}}),_c('h2',{staticClass:\"text-center\"},[_vm._v(\"In order to use this feature, you must complete your account setup\")]),_c('ftb-button',{staticClass:\"mx-auto py-2 px-4 my-2\",attrs:{\"color\":\"primary\"},on:{\"click\":_vm.openProfile}},[_vm._v(\"Click here to continue\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"flex flex-col h-full bg-background\",staticStyle:{\"width\":\"300px\"}},[_c('div',{staticClass:\"profile bg-navbar flex flex-row items-center relative\",staticStyle:{\"height\":\"92px\"}},[_c('div',{staticClass:\"minimtg pointer-events-none\"}),_c('div',{staticClass:\"p-4 flex flex-row items-center\"},[_c('img',{staticClass:\"rounded-full\",staticStyle:{\"margin-right\":\"0.75em\"},attrs:{\"src\":(\"https://api.mymcuu.id/head/\" + _vm.avatarName),\"width\":\"30px\"}}),_c('div',{staticClass:\"flex flex-col\"},[(_vm.auth.token !== null)?_c('p',{staticClass:\"text-lg\"},[_vm._v(_vm._s(_vm.auth.token.mc.display))]):_vm._e(),(_vm.auth.token !== null)?_c('p',{key:\"friendCode\",staticClass:\"text-xs cursor-pointer\",on:{\"click\":_vm.copyFriendCode}},[_vm._v(_vm._s(_vm.auth.token.mc.friendCode)+\" \"),_c('transition',{attrs:{\"name\":\"fade\"}},[(_vm.copied)?_c('span',{key:\"copied\"},[_vm._v(\" - Copied!\")]):_vm._e()])],1):_vm._e()])])]),_c('div',{staticClass:\"friends flex flex-col overflow-hidden\",staticStyle:{\"max-height\":\"300px\"}},[_c('div',{staticClass:\"bg-background-lighten p-2 flex flex-row\"},[_c('p',{staticClass:\"ml-2\"},[_vm._v(\"Friends\")]),(_vm.showSearch)?_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.search),expression:\"search\"}],staticClass:\"bg-input text-xs mx-2\",staticStyle:{\"padding\":\"0 2px\"},attrs:{\"type\":\"search\",\"placeholder\":\"Search...\"},domProps:{\"value\":(_vm.search)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.search=$event.target.value}}}):_vm._e(),_c('div',{staticClass:\"icons ml-auto\"},[_c('font-awesome-icon',{staticClass:\"mx-2 cursor-pointer\",attrs:{\"icon\":\"search\"},on:{\"click\":_vm.toggleSearch}}),_c('font-awesome-icon',{staticClass:\"mx-2 cursor-pointer\",attrs:{\"icon\":\"user-plus\"},on:{\"click\":_vm.openAddFriendUI}})],1)]),_c('div',{staticClass:\"overflow-y-auto\"},_vm._l((_vm.currentFriends),function(friend){return _c('div',{key:friend.id,class:(\"flex flex-row p-2 items-center \" + (_vm.currentPage === 'chatFriend' && _vm.activeFriend !== undefined && _vm.activeFriend === friend.shortHash ? 'bg-background-lighten' : 'hover:bg-background-lighten') + \" cursor-pointer\"),on:{\"click\":function($event){return _vm.openFriendChat(friend)}}},[_c('p',{class:(\"ml-2 cursor-pointer overflow-hidden \" + (friend.online ? 'text-white font-bold' : 'text-muted font-normal')),staticStyle:{\"text-overflow\":\"ellipsis\"}},[_vm._v(_vm._s(friend.profile.display)+\" \")]),(_vm.unreadMessages[friend.profile.chat.hash.medium] > 0)?_c('p',{staticClass:\"bg-red-600 rounded-full px-2 ml-2 text-xs\"},[_vm._v(_vm._s(_vm.unreadMessages[friend.profile.chat.hash.medium]))]):_vm._e(),_c('div',{staticClass:\"icons ml-auto\"},[(friend.currentPack && friend.currentPack.length > 0)?_c('font-awesome-icon',{staticClass:\"mx-2 cursor-pointer\",attrs:{\"icon\":\"gamepad\",\"title\":friend.currentPack},on:{\"click\":function($event){return _vm.openModpack(friend)}}}):_vm._e(),(friend.online)?_c('font-awesome-icon',{staticClass:\"mx-2 cursor-pointer\",attrs:{\"icon\":\"comments\"}}):_vm._e()],1)])}),0),(_vm.currentFriends.length === 0 && _vm.search.length > 0)?_c('div',{staticClass:\"flex flex-col items-center mt-4 text-sm\"},[_c('font-awesome-icon',{attrs:{\"icon\":\"sad-tear\",\"size\":\"lg\"}}),_c('p',{staticClass:\"p-2 text-center\"},[_vm._v(\"No results\")])],1):(_vm.currentFriends.length === 0 && _vm.loading)?_c('div',{staticClass:\"flex flex-col items-center mt-4 text-sm\"},[_c('font-awesome-icon',{attrs:{\"icon\":\"sync-alt\",\"spin\":\"\",\"size\":\"lg\"}}),_c('p',{staticClass:\"p-2 text-center\"},[_vm._v(\"Loading friends\")])],1):(_vm.currentFriends.length === 0 && _vm.search.length === 0)?_c('div',{staticClass:\"flex flex-col items-center mt-4 text-sm\"},[_c('font-awesome-icon',{attrs:{\"icon\":\"sad-tear\",\"size\":\"lg\"}}),_c('p',{staticClass:\"p-2 text-center\"},[_vm._v(\"It looks like you don't have any friends added at the moment!\")])],1):_vm._e()]),_c('div',{staticClass:\"friends flex flex-col overflow-y-auto\"},[_c('div',{staticClass:\"bg-background-lighten p-2 flex flex-row mt-10 cursor-pointer\",on:{\"click\":_vm.toggleRequests}},[_c('p',{staticClass:\"ml-2 cursor-pointer\"},[_vm._v(\"Pending Requests\")]),(_vm.friendRequests.length > 0 && !_vm.showRequests)?_c('p',{staticClass:\"bg-red-600 rounded-full px-2 ml-2 text-xs\"},[_vm._v(_vm._s(_vm.friendRequests.length))]):_vm._e(),_c('div',{staticClass:\"icons ml-auto\"},[_c('font-awesome-icon',{staticClass:\"mx-2 cursor-pointer\",attrs:{\"icon\":!_vm.showRequests ? 'chevron-left' : 'chevron-down'}})],1)]),(_vm.showRequests)?_c('div',_vm._l((_vm.friendRequests),function(friend){return _c('div',{key:friend.id,staticClass:\"flex flex-row p-2 items-center hover:bg-background-lighten cursor-pointer\"},[_c('p',{staticClass:\"ml-2\"},[_vm._v(_vm._s(friend.profile.display))]),(_vm.acceptingFriends.indexOf(friend.hash) === -1)?_c('div',{staticClass:\"icons ml-auto\"},[_c('font-awesome-icon',{staticClass:\"mx-2 cursor-pointer text-white hover:text-red-500\",attrs:{\"icon\":\"times\"}}),_c('font-awesome-icon',{staticClass:\"mx-2 cursor-pointer text-white hover:text-green-500\",attrs:{\"icon\":\"check\"},on:{\"click\":function($event){return _vm.acceptFriendRequest(friend.hash, friend.profile.display, friend.profile.friendCode)}}})],1):(_vm.acceptingFriends.indexOf(friend.hash) !== -1)?_c('div',[_c('font-awesome-icon',{staticClass:\"mx-2\",attrs:{\"icon\":\"sync-alt\",\"spin\":\"\"}})],1):_vm._e()])}),0):_vm._e()])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport { Component, Prop, Vue, Watch } from 'vue-property-decorator';\r\n// import {shell, ipcRenderer, clipboard} from 'electron';\r\nimport {State, Action} from 'vuex-class';\r\nimport store from '@/store';\r\nimport config from '@/config';\r\nimport { AuthState, Friend } from '../../modules/auth/types';\r\nimport { Messages, FriendListResponse } from '../../types';\r\nimport { shortenHash } from '../../utils';\r\n\r\ninterface UnreadMessages {\r\n    [index: string]: number;\r\n}\r\n\r\n@Component({\r\n    props: [\r\n        'showPage',\r\n        'hidePage',\r\n        'currentPage',\r\n        'messages',\r\n        'friends',\r\n        'activeFriend',\r\n        'loading'\r\n    ],\r\n})\r\nexport default class MainChat extends Vue {\r\n    @State('auth')\r\n    private auth!: AuthState;\r\n    @Action('getFriendCode', {namespace: 'auth'})\r\n    private getFriendCode!: () => void;\r\n    @Action('sendMessage')\r\n    private sendMessage!: (payload: {}) => void;\r\n\r\n    private copied = false;\r\n    private showSearch = false;\r\n    private showRequests = true;\r\n    private search = '';\r\n\r\n    private acceptingFriends: string[] = [];\r\n\r\n    @Prop()\r\n    private loading!: boolean;\r\n    @Prop()\r\n    private friends!: FriendListResponse;\r\n    @Prop()\r\n    private currentPage!: string;\r\n    @Prop()\r\n    private messages!: Messages;\r\n    @Prop()\r\n    private hidePage!: () => void;\r\n    @Prop()\r\n    private showPage!: (page: string, friend?: Friend) => void;\r\n    @Prop()\r\n    private getFriends!: () => void;\r\n\r\n    public toggleSearch() {\r\n        this.showSearch = !this.showSearch;\r\n    }\r\n    public toggleRequests() {\r\n        this.showRequests = !this.showRequests;\r\n    }\r\n\r\n    get avatarName(){\r\n        const provider = this.auth.token?.accounts.find((s) => s.identityProvider === 'mcauth');\r\n        return provider !== undefined && provider !== null ? provider.userId : \"MHF_Steve\";\r\n    }\r\n\r\n    @Watch('auth', {deep: true})\r\n    public async onAuthChange(newVal: AuthState, oldVal: AuthState) {\r\n      if ((newVal.token !== null && newVal.token.mc.friendCode === undefined) || (JSON.stringify(newVal.token) !== JSON.stringify(oldVal.token))) {\r\n        this.getFriendCode();\r\n      }\r\n    }\r\n\r\n    public openFriendChat(friend: Friend) {\r\n        this.showPage('chatFriend', friend);\r\n        this.$forceUpdate();\r\n    }\r\n\r\n    public openAddFriendUI() {\r\n        if (this.currentPage === 'addFriend') {\r\n            this.hidePage();\r\n        } else {\r\n            this.showPage('addFriend');\r\n        }\r\n    }\r\n\r\n    public async acceptFriendRequest(hash: string, name: string, friendCode?: string) {\r\n        this.acceptingFriends.push(hash)\r\n        if(friendCode === undefined){\r\n            friendCode = await this.getFriendCodeFromHash(hash);\r\n        }\r\n        let self = this;\r\n        this.sendMessage({\r\n            payload: {\r\n                type: \"addFriend\",\r\n                userHash: self.auth.token?.mc.display,\r\n                target:hash,\r\n            },\r\n            callback: function(){\r\n                self.getFriends();\r\n            }\r\n        })\r\n    }\r\n\r\n    public getFriendCodeFromHash(hash: string): Promise<string> {\r\n        return fetch(`https://api.creeper.host/minetogether/friendcode`, {headers: {\r\n            'Content-Type': 'application/json',\r\n        }, method: 'POST', body: JSON.stringify({hash: hash})})\r\n        .then((response) => response.json())\r\n        .then(async (data) => {\r\n            return data.code;\r\n        }).catch((err) => {\r\n            throw err;\r\n        });\r\n    }\r\n\r\n    public openModpack(friend: Friend){\r\n        //@ts-ignore\r\n        overwolf.utils.openUrlInDefaultBrowser(`ftb://modpack/${friend.currentPackID}`)\r\n    }\r\n\r\n    get unreadMessages() {\r\n        const unread: UnreadMessages = {};\r\n        Object.keys(this.messages).forEach((shortHash) => {\r\n            unread[shortHash] = this.messages[shortHash].filter((m) => !m.read).length;\r\n        });\r\n        return unread;\r\n    }\r\n\r\n    get currentFriends() {\r\n        let friends = this.friends.friends.filter((a) => a.accepted).sort((a, b) => Number(b.online) - Number(a.online));\r\n        if (this.search.length > 0) {\r\n            friends = friends.filter((a) => a.profile.display.indexOf(this.search) !== -1);\r\n        }\r\n        return friends;\r\n    }\r\n\r\n    get friendRequests() {\r\n        return this.friends.requests.filter((friend) => this.currentFriends.find((f) => f.id === friend.id) === undefined);\r\n    }\r\n\r\n    public mounted() {\r\n        this.showRequests = this.friendRequests.length > 0;\r\n    }\r\n\r\n    public copyFriendCode() {\r\n        if (this.auth.token) {\r\n            //@ts-ignore\r\n            overwolf.utils.placeOnClipboard(this.auth.token.mc.friendCode);\r\n            this.copied = true;\r\n            setTimeout(() => this.copied = false, 2000);\r\n        }\r\n    }\r\n}\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FriendsList.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FriendsList.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./FriendsList.vue?vue&type=template&id=2b406636&\"\nimport script from \"./FriendsList.vue?vue&type=script&lang=ts&\"\nexport * from \"./FriendsList.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./FriendsList.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"flex flex-col h-full w-full p-2\"},[_c('h1',{staticClass:\"text-4xl \"},[_vm._v(\"Add Friend\")]),_c('div',{staticClass:\" \"},[(_vm.message.length > 0)?_c('div',{class:(\"p-4 bg-\" + _vm.messageType + \" text-white mt-2 rounded\")},[_vm._v(\" \"+_vm._s(_vm.message)+\" \")]):_vm._e(),_c('ftb-input',{attrs:{\"label\":\"Friend Code\",\"value\":_vm.friendCode},model:{value:(_vm.friendCode),callback:function ($$v) {_vm.friendCode=$$v},expression:\"friendCode\"}}),_c('ftb-button',{staticClass:\"text-center px-2 py-1\",attrs:{\"color\":\"primary\",\"disabled\":_vm.auth.loading},on:{\"click\":_vm.submit}},[_vm._v(\"Add\")])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport { Component, Prop, Vue, Watch } from 'vue-property-decorator';\r\n// import { shell, ipcRenderer, clipboard } from 'electron';\r\nimport { State, Action } from 'vuex-class';\r\nimport store from '@/store';\r\nimport config from '@/config';\r\nimport { AuthState } from '../../modules/auth/types';\r\nimport FTBInput from '../FTBInput.vue';\r\nimport FTBButton from '../FTBButton.vue';\r\nimport { FriendRequestResponse } from '../../modules/auth/actions';\r\nimport { shortenHash } from '../../utils';\r\n\r\n@Component({\r\n    components: {\r\n        'ftb-input': FTBInput,\r\n        'ftb-button': FTBButton,\r\n    },\r\n})\r\nexport default class AddFriend extends Vue {\r\n  @State('auth')\r\n  private auth!: AuthState;\r\n  @Action('submitFriendRequest', {namespace: 'auth'})\r\n  private submitFriendRequest!: (payload: {friendCode: string}) => Promise<FriendRequestResponse>;\r\n\r\n  private message = '';\r\n  private messageType: 'danger' | 'primary' = 'primary';\r\n  private friendCode = '';\r\n\r\n  public async submit() {\r\n      this.message = '';\r\n      if (this.friendCode.length === 0) {\r\n          return;\r\n      }\r\n      if(this.friendCode === this.auth.token?.mc.friendCode){\r\n        this.messageType = 'danger';\r\n        this.message = \"You cannot add yourself as a friend!\";\r\n        return;\r\n      }\r\n      const response: FriendRequestResponse = await this.submitFriendRequest({friendCode: this.friendCode});\r\n      if (response.status === 'success') {\r\n          this.message = 'Friend Request Sent';\r\n          this.messageType = 'primary';\r\n          this.friendCode = '';\r\n          if (response.hash) {\r\n            /// send friend request\r\n            // ipcRenderer.send('sendFriendRequest', {target: shortenHash(response.hash), hash: response.hash, name: this.auth.token?.mc.display});\r\n          }\r\n      } else {\r\n        this.messageType = 'danger';\r\n        this.message = response.message;\r\n      }\r\n  }\r\n}\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddFriend.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddFriend.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./AddFriend.vue?vue&type=template&id=25d76942&\"\nimport script from \"./AddFriend.vue?vue&type=script&lang=ts&\"\nexport * from \"./AddFriend.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"flex flex-col h-full w-full p-2\"},[_c('div',{staticClass:\"flex flex-row items-center\"},[_c('h1',{staticClass:\"text-2xl max-w-xs overflow-hidden\",staticStyle:{\"text-overflow\":\"ellipsis\"}},[_vm._v(_vm._s(_vm.friend.profile.display))]),_c('div',{staticClass:\"ml-auto mr-2 mt-6\"},[_c('font-awesome-icon',{staticClass:\"mx-2 cursor-pointer text-muted hover:text-white\",attrs:{\"icon\":\"ban\",\"title\":\"Block\"},on:{\"click\":_vm.blockFriend}}),_c('font-awesome-icon',{staticClass:\"mx-2 cursor-pointer text-muted hover:text-white\",attrs:{\"icon\":\"trash\",\"title\":\"Remove\"},on:{\"click\":_vm.removeFriend}}),(_vm.friend.currentServer)?_c('font-awesome-icon',{staticClass:\"mx-2 cursor-pointer text-muted hover:text-white\",attrs:{\"icon\":\"globe\"},on:{\"click\":_vm.openServer}}):_vm._e()],1)]),_c('div',{ref:\"chat\",staticClass:\"chat-area flex-1 overflow-y-scroll overflow-x-hidden mb-2\",on:{\"scroll\":_vm.onScroll}},_vm._l((_vm.sortedMessages),function(m){return _c('div',{key:JSON.stringify(m),staticClass:\"flex flex-row\"},[_c('div',{class:((m.author === _vm.shortHash ? 'ml-auto mr-2 text-right' : 'ml-2 text-left') + \" my-2 flex flex-col\")},[_c('p',{staticClass:\" p-3 bg-input rounded text-left\",domProps:{\"innerHTML\":_vm._s(_vm.linkify(m.content))},on:{\"click\":_vm.onMessageClick}}),_c('small',{class:((m.author === _vm.shortHash ? 'ml-auto text-right ' : '') + \" text-muted text-xs\")},[_vm._v(_vm._s(_vm._f(\"momentFromNow\")(m.date / 1000)))])])])}),0),_c('div',{staticClass:\"flex flex-col items-stretch\"},[(!_vm.friend.online)?_c('small',{staticClass:\"text-xs text-center\"},[_vm._v(_vm._s(_vm.friend.profile.display)+\" is currently offline\")]):_vm._e(),_c('div',{staticClass:\"w-full flex flex-row items-center relative\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.newMessage),expression:\"newMessage\"}],class:\"bg-background focus:outline-none border block flex-1 text-2xl transition-all duration-200 ease-in-out p-2 rounded appearance-none leading-normal text-gray-300 border-background-lighten shadow\",attrs:{\"disabled\":!_vm.friend.online},domProps:{\"value\":(_vm.newMessage)},on:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.send($event)},\"input\":function($event){if($event.target.composing){ return; }_vm.newMessage=$event.target.value}}}),_c('div',{staticClass:\"bg-background-lighten p-4 h-full\"},[_c('font-awesome-icon',{attrs:{\"icon\":\"paper-plane\"}})],1)])]),(_vm.checkLink !== null)?_c('FTBModal',{attrs:{\"visible\":_vm.checkLink !== null},on:{\"dismiss-modal\":_vm.hideModal}},[_c('ConfirmationModal',{attrs:{\"title\":\"Are you sure you want to open this link?\",\"message\":(\"You're about to go to \" + _vm.checkLink + \", we do not control contents of this link and cannot be held responsible for anything caused by it. Please ensure you trust this link before continuing. Are you sure you wish to continue?\"),\"yesAction\":_vm.navigateToLink,\"noAction\":_vm.hideModal}})],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"flex flex-col min-w-1/2\"},[_c('h1',{staticClass:\"text-2xl mb-2\"},[_vm._v(_vm._s(_vm.title))]),_c('div',[_c('p',{staticClass:\"text-center\"},[_vm._v(_vm._s(_vm.message))])]),_c('hr',{staticClass:\"mt-4 mb-2\"}),_c('div',{staticClass:\"flex justify-center\"},[_c('ftb-button',{staticClass:\"py-2 px-4 mx-2 text-center float-right\",attrs:{\"color\":\"danger\",\"css-class\":\"text-center text-l\"},on:{\"click\":_vm.noAction}},[_vm._v(\"No\")]),_c('ftb-button',{staticClass:\"py-2 px-4 mx-2 text-center float-right\",attrs:{\"color\":\"primary\",\"css-class\":\"text-center text-l\"},on:{\"click\":_vm.yesAction}},[_vm._v(\"Yes\")])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport { Component, Prop, Vue } from 'vue-property-decorator';\r\nimport FTBButton from '../FTBButton.vue';\r\n\r\n@Component({\r\n    name: 'ConfirmationModal',\r\n    props: [\r\n        'title',\r\n        'message',\r\n        'yesAction',\r\n        'noAction',\r\n    ],\r\n    components: {\r\n      'ftb-button': FTBButton\r\n    }\r\n})\r\nexport default class ConfirmationModal extends Vue {\r\n}\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ConfirmationModal.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ConfirmationModal.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./ConfirmationModal.vue?vue&type=template&id=45d3d28c&\"\nimport script from \"./ConfirmationModal.vue?vue&type=script&lang=ts&\"\nexport * from \"./ConfirmationModal.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport { Component, Prop, Vue, Watch } from 'vue-property-decorator';\r\n// import { shell, ipcRenderer, clipboard } from 'electron';\r\nimport { State, Action } from 'vuex-class';\r\nimport store from '@/store';\r\nimport config from '@/config';\r\nimport { AuthState, Friend } from '../../modules/auth/types';\r\nimport FTBInput from '../FTBInput.vue';\r\nimport FTBButton from '../FTBButton.vue';\r\nimport { Message } from '../../types';\r\nimport ConfirmationModal from '../modals/ConfirmationModal.vue';\r\nimport FTBModal from '../FTBModal.vue';\r\n\r\n\r\n@Component({\r\n    components: {\r\n        'ftb-input': FTBInput,\r\n        'ftb-button': FTBButton,\r\n        ConfirmationModal,\r\n        FTBModal\r\n    },\r\n    props: [\r\n        'friend',\r\n        'shortHash',\r\n        'messages',\r\n        'sendMessage',\r\n        'removeFriend',\r\n        'blockFriend'\r\n    ],\r\n})\r\nexport default class FriendChat extends Vue {\r\n    @Prop()\r\n    private friend!: Friend;\r\n    @Prop()\r\n    private shortHash!: string;\r\n\r\n    private newMessage = '';\r\n    @Prop()\r\n    private removeFriend!: () => Promise<boolean | string>;\r\n    @Prop()\r\n    private blockFriend!: () => Promise<boolean | string>;\r\n\r\n    @Prop()\r\n    private messages!: Message[];\r\n    @Prop()\r\n    private sendMessage!: (message: string) => void;\r\n\r\n    private whitelistedDomains: string[] = ['creeperhost.net', 'feed-the-beast.com', 'minetogether.io', 'creeper.host', 'playat.ch', 'ch.tools'];\r\n\r\n    private checkLink: string | null = null;\r\n\r\n    private lastScroll = 0;\r\n    private hasScrolled = false;\r\n    \r\n    public hideModal(){\r\n        this.checkLink = null;\r\n    }\r\n\r\n    public linkify(text: string): string {\r\n        const urlRegex =/(\\b(https?|ftp|file):\\/\\/[-A-Z0-9+&@#\\/%?=~_|!:,.;]*[-A-Z0-9+&@#\\/%=~_|])/ig;\r\n        return text.replace(urlRegex, function(url) {\r\n            return '<a href=\"' + url + '\" target=\"_blank\">' + url + '</a>';\r\n        });\r\n    }\r\n\r\n    get sortedMessages() {\r\n        if (!this.messages) {\r\n            return [];\r\n        }\r\n        return this.messages.sort((a: Message, b: Message) => a.date - b.date);\r\n    }\r\n\r\n    public scrollToLastChild() {\r\n        const chat: Element = this.$refs.chat as Element;\r\n        const el: Element = chat.lastChild as Element;\r\n        if (el !== null) {\r\n            el.scrollIntoView({behavior: 'smooth'});\r\n        }\r\n    }\r\n\r\n    public onMessageClick(event: any){\r\n        if(event.target != null){\r\n            if(event.target.tagName === 'A'){\r\n                const url = event.target.href;\r\n                const domain = url.match(/^(?:https?:\\/\\/)?(?:[^@\\/\\n]+@)?(?:www\\.)?([^:\\/?\\n]+)/)[0];\r\n                const whitelistedDomain = this.whitelistedDomains.find((d) => domain.indexOf(d) !== -1);\r\n                if(whitelistedDomain === undefined){\r\n                    event.preventDefault();\r\n                    this.checkLink = event.target.href;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    public onScroll(){\r\n        const chat: Element = this.$refs.chat as Element;\r\n        const pos = chat.scrollTop;\r\n        const maximum = chat.scrollHeight - chat.clientHeight;\r\n        if(pos - this.lastScroll < -1){\r\n            this.hasScrolled = true;\r\n        } else if(pos >= maximum){\r\n            this.hasScrolled = false;\r\n        }\r\n        this.lastScroll = pos;\r\n    }\r\n\r\n    public beforeUpdate() {\r\n        const chat: Element = this.$refs.chat as Element;\r\n        const pos = chat.scrollTop;\r\n        const maximum = chat.scrollHeight - chat.clientHeight;\r\n        if (!this.hasScrolled) {\r\n            setTimeout(() => {\r\n               this.scrollToLastChild();\r\n            }, 10);\r\n        }\r\n    }\r\n\r\n    public mounted() {\r\n        this.scrollToLastChild();\r\n    }\r\n\r\n    public send() {\r\n        this.sendMessage(this.newMessage);\r\n        this.newMessage = '';\r\n    }\r\n\r\n    public navigateToLink(){\r\n        //@ts-ignore\r\n        overwolf.utils.openUrlInDefaultBrowser(this.checkLink);\r\n        this.checkLink = null;\r\n    }\r\n\r\n    public openServer(){\r\n        //@ts-ignore\r\n        overwolf.utils.openUrlInDefaultBrowser(`ftb://server/${this.friend.currentServer}`);\r\n    }\r\n}\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FriendChat.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FriendChat.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./FriendChat.vue?vue&type=template&id=7a39b07a&\"\nimport script from \"./FriendChat.vue?vue&type=script&lang=ts&\"\nexport * from \"./FriendChat.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./FriendChat.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport TitleBar from '@/components/TitleBar.vue';\r\nimport FTBButton from '@/components/FTBButton.vue';\r\nimport { Component, Vue, Watch } from 'vue-property-decorator';\r\n// import { ipcRenderer } from 'electron';\r\nimport FriendsList from '@/components/chat/FriendsList.vue';\r\nimport AddFriend from '@/components/chat/AddFriend.vue';\r\nimport FriendChat from '@/components/chat/FriendChat.vue';\r\nimport { Friend, AuthState } from '../modules/auth/types';\r\nimport {State, Action} from 'vuex-class';\r\nimport { Messages, UnreadMessages, Message, FriendListResponse } from '../types';\r\nimport { SettingsState, Settings } from '../modules/settings/types';\r\nimport { SocketState } from '../modules/websocket/types';\r\n\r\n@Component({\r\n  components: {\r\n    TitleBar,\r\n    'friends-list': FriendsList,\r\n    AddFriend,\r\n    FriendChat,\r\n    'ftb-button': FTBButton,\r\n  },\r\n})\r\nexport default class ChatWindow extends Vue {\r\n    @State('auth')\r\n    private auth!: AuthState;\r\n    @State('settings')\r\n    private settings!: SettingsState;\r\n    @State('websocket')\r\n    private websocket!: SocketState;\r\n    @Action('sendMessage') public sendIRCMessage: any;\r\n\r\n    private hasLoaded = false;\r\n    private loadingFriends: boolean = false;\r\n    private currentPage = '';\r\n    private friend: Friend | null = null;\r\n    private messages: Messages = {};\r\n    private friends: FriendListResponse = {friends: [], requests: []};\r\n\r\n    @Action('removeFriend', {namespace: 'auth'})\r\n    private removeFriendAction!: (hash: string) => Promise<boolean | string>;\r\n\r\n    @Action('saveSettings', {namespace: 'settings'})\r\n    private saveSettings!: (settings: Settings) => Promise<boolean | string>;\r\n\r\n    @Action('registerIRCCallback')\r\n    private registerIRCCallback: any;\r\n\r\n    @Watch('auth', {deep: true})\r\n    public async onAuthChange(newVal: AuthState, oldVal: AuthState) {\r\n        console.log(\"Auth changes\", newVal.token?.accounts, this.hasLoaded, newVal.token?.accounts.find((s: any) => s.identityProvider === \"mcauth\") !== undefined && !this.hasLoaded);\r\n        if(newVal.token?.accounts.find((s: any) => s.identityProvider === \"mcauth\") !== undefined && !this.hasLoaded){\r\n            this.hasLoaded = true;\r\n            if(newVal.token){\r\n                this.getFriends(newVal.token.mc.hash.long);\r\n            }\r\n            setInterval(() => {\r\n                if(newVal.token){\r\n                    this.getFriends(newVal.token.mc.hash.long);\r\n                }\r\n            }, 30 * 1000);\r\n        }\r\n    }\r\n\r\n    public getFriends(longHash?: string){\r\n        console.log(\"Loading friends\");\r\n        this.loadingFriends = true;\r\n        if(longHash === undefined){\r\n            longHash = this.auth.token?.mc.hash.long;\r\n        }\r\n        if(Array.isArray(longHash)){\r\n            longHash = longHash[0];\r\n        }\r\n        this.sendIRCMessage({payload: {type: 'getFriends', hash: longHash}, callback: (data: any) => {\r\n            console.log(\"Got friends\")\r\n            data = data.friends;\r\n            Vue.set(this.friends, 'friends',  data.friends);\r\n            let requests = this.friends.requests;\r\n            requests = data.requests.map((request: Friend) => {\r\n                const existing = this.friends.requests.find((f) => f.profile.hash === request.profile.hash);\r\n                if (existing !== undefined) {\r\n                    request.profile.friendCode = existing.profile.friendCode;\r\n                    request.profile.display = existing.profile.display;\r\n                }\r\n                return request;\r\n            });\r\n            Vue.set(this.friends, 'requests', requests);\r\n            this.loadingFriends = false;\r\n        }});\r\n    }\r\n\r\n    get isMinecraftLinked(){\r\n        const p = this.auth.token?.accounts.find((s) => s.identityProvider === \"mcauth\");\r\n        return p !== undefined && p != null;\r\n    }\r\n\r\n    public openProfile(){\r\n        //@ts-ignore\r\n        overwolf.utils.openUrlInDefaultBrowser(\"https://minetogether.io/profile/connections\");\r\n    }\r\n\r\n    public expand() {\r\n        //@ts-ignore\r\n        overwolf.windows.getCurrentWindow((result) => {\r\n             if(result && result.status === \"success\" && result.window && result.window.id){\r\n                //@ts-ignore\r\n                 overwolf.windows.changeSize(result.window.id, 800, result.window.height);\r\n             }\r\n        });\r\n    }\r\n\r\n    public retract() {\r\n        //@ts-ignore\r\n        overwolf.windows.getCurrentWindow((result) => {\r\n             if(result && result.status === \"success\" && result.window && result.window.id){\r\n                //@ts-ignore\r\n                 overwolf.windows.changeSize(result.window.id, 300, result.window.height);\r\n             }\r\n        });\r\n    }\r\n\r\n    public showPage(page: string, friend?: Friend) {\r\n        if (this.currentPage === page) {\r\n            if (this.friend && friend && this.friend.hash === friend.hash) {\r\n                this.hidePage();\r\n                return;\r\n            }\r\n        }\r\n        this.expand();\r\n        if (friend) {\r\n            this.friend = friend;\r\n            if (this.messages[friend.profile.chat.hash.medium]) {\r\n                let messages = this.messages[friend.profile.chat.hash.medium];\r\n                messages = messages.map((message) => {\r\n                    message.read = true;\r\n                    return message;\r\n                });\r\n                Vue.set(this.messages, this.friend.profile.chat.hash.medium, messages);\r\n            }\r\n            this.$forceUpdate();\r\n        }\r\n        setTimeout(() => {\r\n            this.currentPage = page;\r\n        }, 100);\r\n    }\r\n\r\n    public hidePage() {\r\n        this.retract();\r\n        this.friend = null;\r\n        this.currentPage = '';\r\n    }\r\n\r\n    public async blockFriend(){\r\n         if (this.friend === null || this.friend.hash === undefined) {\r\n            return;\r\n        }\r\n        const success = await this.removeFriendAction(this.friend.hash);\r\n        if (typeof success === 'string') {\r\n\r\n        } else {\r\n            if (success) {\r\n                this.sendIRCMessage({payload: {type: \"blockFriend\", hash: this.friend.hash}})\r\n                this.hidePage();    \r\n               if(this.auth.token){\r\n                    this.getFriends(this.auth.token.mc.hash.long);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    public async removeFriend() {\r\n        if (this.friend === null || this.friend.hash === undefined) {\r\n            return;\r\n        }\r\n        const success = await this.removeFriendAction(this.friend.hash);\r\n        if (typeof success === 'string') {\r\n\r\n        } else {\r\n            if (success) {\r\n                this.hidePage();\r\n                if(this.auth.token){\r\n                    this.getFriends(this.auth.token.mc.hash.long);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    public sendMessage(message: string) {\r\n        if(message.length < 1){\r\n            return;\r\n        }\r\n        if (this.friend === null || this.auth.token === null) {\r\n            return;\r\n        }\r\n        this.sendIRCMessage({payload: {type: 'ircSendMessage', nick: this.friend.profile.chat.hash.medium, message}});\r\n        let messages: Message[];\r\n        if (this.messages[this.friend.profile.chat.hash.medium] === undefined) {\r\n            messages = [];\r\n        } else {\r\n            messages = this.messages[this.friend.profile.chat.hash.medium];\r\n        }\r\n        messages.push({content: message, date: new Date().getTime(), author: this.auth.token.mc.chat.hash.short, read: true});\r\n        Vue.set(this.messages, this.friend.profile.chat.hash.medium, messages);\r\n    }\r\n\r\n    public mounted() {\r\n        this.retract();\r\n        // ipcRenderer.on('updateSettings', (event, data) => {\r\n        //     this.settings.settings = data;\r\n        // });\r\n        this.registerIRCCallback((data: any) => {\r\n            if(data.jsEvent === \"message\"){\r\n                if(data.ircType === \"privmsg\"){\r\n                    let from = data.nick;\r\n                    let message = data.message;\r\n                    if(this.settings.settings.blockedUsers.indexOf(from) !== -1){\r\n                        return;\r\n                    }\r\n                    let messages: Message[];\r\n                    if (this.messages[from] === undefined) {\r\n                        messages = [];\r\n                    } else {\r\n                        messages = this.messages[from];\r\n                    }\r\n                    messages.push({content: message, author: from, date: new Date().getTime(), read: this.currentPage === 'chatFriend' && this.friend?.profile.chat.hash.medium === from});\r\n                    Vue.set(this.messages, from, messages);\r\n                }\r\n            } else if(data.jsEvent === \"ctcp\"){\r\n                let request = data.data;\r\n                if(data.type === \"newFriend\"){\r\n                    const requests = this.friends.requests;\r\n                    const existing = requests.find((r) => r.profile.chat.hash.medium === data.nick);\r\n                    if (existing !== undefined) {\r\n                        return;\r\n                    }\r\n                    let profile = data.profile;\r\n                    requests.push({profile, name: profile.display, accepted: false});\r\n                    Vue.set(this.friends, 'requests', requests);\r\n                }\r\n                if(this.auth.token){\r\n                    this.getFriends(this.auth.token.mc.hash.long);\r\n                }\r\n            }\r\n        });\r\n    }\r\n}\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatWindow.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatWindow.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./ChatWindow.vue?vue&type=template&id=0f761e9e&\"\nimport script from \"./ChatWindow.vue?vue&type=script&lang=ts&\"\nexport * from \"./ChatWindow.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./ChatWindow.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FriendsList.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FriendsList.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}